# Open Agent - Environment Configuration
# Copy this file to .env and fill in your values.

# =============================================================================
# OpenRouter (Required for local backend or memory)
# =============================================================================
OPENROUTER_API_KEY=sk-or-v1-your-key-here

# Default model for task execution. Must support tool/function calling.
# The ModelSelector automatically filters to tool-capable models.
# Claude Sonnet 4.5 is recommended: 2x cheaper than 3.5, 5x larger context (1M tokens)
# Examples: anthropic/claude-sonnet-4.5, anthropic/claude-sonnet-4, openai/gpt-4o
DEFAULT_MODEL=anthropic/claude-sonnet-4.5

# =============================================================================
# OpenCode Backend (Optional)
# =============================================================================
# When using OpenCode as the execution backend.
# AGENT_BACKEND can be "opencode" or "local" (default: opencode if OPENCODE_BASE_URL is set).
AGENT_BACKEND=opencode
OPENCODE_BASE_URL=http://127.0.0.1:4096
# Optional OpenCode agent name (build/plan/etc)
OPENCODE_AGENT=build
# Auto-allow all OpenCode permissions (default: true)
OPENCODE_PERMISSIVE=true

# =============================================================================
# Supabase (Required for memory/storage)
# =============================================================================
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
SUPABASE_ANON_KEY=your-anon-key-here

# =============================================================================
# Memory / Embedding Configuration
# =============================================================================
# Embedding model (Qwen3 Embedding 8B recommended for cost/quality balance)
MEMORY_EMBED_MODEL=qwen/qwen3-embedding-8b

# Reranker model (Qwen-family reranker for precision)
MEMORY_RERANK_MODEL=qwen/qwen3-reranker-8b

# =============================================================================
# Agent Configuration
# =============================================================================
# Default working directory for relative paths.
# The agent still has full machine access (absolute paths work everywhere).
# In production this is typically `/root`.
WORKING_DIR=.

# HTTP server settings
HOST=127.0.0.1
PORT=3000

# Maximum agent loop iterations
MAX_ITERATIONS=50

# =============================================================================
# Dashboard / API Auth (JWT)
# =============================================================================
# When DEV_MODE=false, the API requires Authorization: Bearer <jwt> on all endpoints
# except /api/health and /api/auth/login.
#
# For local debugging, set DEV_MODE=true to disable auth entirely.
DEV_MODE=true

# Password the dashboard submits to obtain a JWT.
# Choose something strong in real deployments.
DASHBOARD_PASSWORD=change-me

# HMAC secret used to sign/verify JWTs. Use a strong random value in production.
JWT_SECRET=change-me-to-a-long-random-string

# JWT validity in days (default: 30)
JWT_TTL_DAYS=30

# =============================================================================
# Dashboard Console / File Explorer (SSH)
# =============================================================================
# These are used by the dashboard "Console" page to:
# - open an interactive root shell (WebSocket -> PTY -> ssh)
# - list/upload/download files (SFTP)
#
# Recommended: store the private key as base64 to avoid multiline env issues.
CONSOLE_SSH_HOST=95.216.112.253
CONSOLE_SSH_PORT=22
CONSOLE_SSH_USER=root
# Recommended: point to a key file on disk (avoid embedding secrets in env).
CONSOLE_SSH_PRIVATE_KEY_PATH=
# base64(OpenSSH private key). Example:
#   base64 -i ~/.ssh/agent.thomas.md | tr -d '\n'
CONSOLE_SSH_PRIVATE_KEY_B64=
