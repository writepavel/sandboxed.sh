---
description: MCP (Model Context Protocol) server configuration
globs: [".open_agent/**", "src/mcp/**"]
---

# MCP Configuration

## Overview

Open Agent supports MCP (Model Context Protocol) servers for extending agent capabilities.

## Config Location

```
.open_agent/mcp/config.json
```

This file is **auto-managed** by the dashboard and API. Do not edit directly unless debugging.

## API Endpoints

| Method | Path | Purpose |
|--------|------|---------|
| `GET` | `/api/mcp` | List all MCP configs |
| `POST` | `/api/mcp` | Add new MCP server |
| `GET` | `/api/mcp/{id}` | Get specific config |
| `PUT` | `/api/mcp/{id}` | Update config |
| `DELETE` | `/api/mcp/{id}` | Remove config |
| `POST` | `/api/mcp/{id}/enable` | Enable server |
| `POST` | `/api/mcp/{id}/disable` | Disable server |
| `GET` | `/api/mcp/{id}/tools` | List tools from server |
| `POST` | `/api/mcp/{id}/tools/{tool}` | Invoke tool |

## MCP Server Config Schema

```typescript
interface McpServerConfig {
  id: string;           // UUID
  name: string;         // Display name
  endpoint: string;     // URL or command
  enabled: boolean;     // Active state
  transport: 'http' | 'stdio';  // Connection type
  headers?: Record<string, string>;  // For HTTP
  env?: Record<string, string>;      // For stdio
}
```

## Source Files

| File | Purpose |
|------|---------|
| `src/mcp/config.rs` | Config persistence (load/save) |
| `src/mcp/registry.rs` | MCP server registry |
| `src/mcp/types.rs` | Type definitions |
| `src/api/mcp.rs` | HTTP API handlers |

## Adding MCP Support

When extending MCP:
1. Update types in `src/mcp/types.rs`
2. Implement in `src/mcp/registry.rs`
3. Add API routes in `src/api/mcp.rs`
4. Update dashboard UI in `dashboard/src/app/modules/`
