/ralph-loop --max-iterations 50 --completion-promise "<promise>SHADER_FIX_COMPLETE</promise>"

# Meta Ralph Loop: Oraxen Shader Fix via OpenAgent Orchestration

## Role
You are Claude Opus orchestrating a Claude Code mission through the OpenAgent dashboard via Chrome browser automation. Your job is to:
1. Control the Claude Code agent to fix Oraxen text shaders for Minecraft 1.21.4
2. Fix any OpenAgent frontend/backend bugs you encounter along the way
3. Monitor mission progress and intervene when the agent gets stuck

## CRITICAL: Completion Signal
When ALL success criteria below are met, output exactly:
<promise>SHADER_FIX_COMPLETE</promise>

Do NOT output this until ALL criteria are verified. This will end the loop.

## Success Criteria (ALL must be true to complete)
1. grep confirms no remaining "#version 150" in Oraxen codebase (verified via SSH)
2. Test server started successfully with shard
3. Minecraft client connected via mc-cli
4. Text shaders render correctly (screenshot evidence from agent)
5. No new OpenAgent bugs in last 2 monitoring cycles

## Plan

### Phase 1: Mission Setup
1. Navigate to OpenAgent dashboard at localhost:3001/control
2. Create new Claude Code mission in "minecraft" workspace (create from template if needed)
3. Ensure workspace has access to: oraxen repo, shard, mc-cli

### Phase 2: Send Initial Prompt to Claude Code Agent
Send this exact prompt to the mission:

---
Your task is to fix Oraxen shader compatibility with Minecraft 1.21.4.

IMPORTANT: The issue is likely with TEXT SHADERS, not just armor shaders.

Step 1 - Find ALL shader code:
- Search for text/font/glyph shader generation
- grep -r "#version" in the entire codebase
- Focus on rendertype_text shaders

Step 2 - Fix shader versions:
- Change ALL "#version 150" to "#version 330 core"
- Update deprecated GLSL: texture2D to texture, gl_FragColor to out variable
- Fix varying to in/out keywords

Step 3 - Set up testing:
- Clone https://github.com/th0rgal/shard (server launcher)
- Clone https://github.com/Th0rgal/mc-cli (client controller)
- Create Fabric 1.21.4 profile for mc-cli if needed
- Build Oraxen: ./gradlew build

Step 4 - Test:
- Start test server with shard
- Launch client with mc-cli
- Connect and verify text shaders render correctly
- Take screenshots as proof

Full permission granted. Stop asking for permission and proceed autonomously.
---

### Phase 3: Monitor Mission (every 3-5 minutes)
1. Take screenshot of mission status
2. If agent idle >2 minutes: send "Continue working on the shader fix."
3. If agent asks permission: send "Yes, full permission granted. Proceed."
4. If agent off-track: redirect to TEXT shaders specifically

### Phase 4: Fix OpenAgent Bugs As Discovered
When encountering platform bugs:
1. Document the bug
2. Fix in dashboard/ or src/
3. Test the fix
4. Continue monitoring

### Phase 5: Verification
Once agent reports completion:
1. SSH verify: ssh root@95.216.112.253 "grep -r '#version 150' /root/workspaces/*/oraxen/"
2. Should return empty
3. Confirm agent has screenshot evidence of working shaders
4. If verification fails, send correction and repeat

### Phase 6: Complete
When ALL success criteria verified:
1. Ensure all OpenAgent fixes saved
2. Output: <promise>SHADER_FIX_COMPLETE</promise>

## Intervention Messages
- Idle agent: "Continue working on the shader fix."
- Permission request: "Yes, full permission granted. Proceed."
- Wrong focus: "Focus on TEXT shaders. Search for rendertype_text."
- mc-cli issues: "Create a new Fabric 1.21.4 profile. Modify mc-cli source if needed."
- No testing: "You must verify with actual test server using shard and mc-cli."

## Error Recovery
- Browser disconnected: call tabs_context_mcp to reconnect
- Typing fails: use JavaScript nativeInputValueSetter injection
- Mission crash: check logs via SSH, fix backend bug if needed, restart

## Technical Context
- Dashboard: localhost:3001
- Backend: 95.216.112.253
- Oraxen location: /root/workspaces/mission-*/oraxen/
- GLSL requirement: version 330 core (not 150)
- Text shaders: rendertype_text.vsh and rendertype_text.fsh

## Progress Checklist
- [ ] Mission created in minecraft workspace
- [ ] Initial prompt sent
- [ ] Agent found text shader code
- [ ] Agent applied shader fixes
- [ ] Agent set up shard
- [ ] Agent set up mc-cli
- [ ] Oraxen built successfully
- [ ] Test server running
- [ ] Client connected
- [ ] Shaders verified working
- [ ] No #version 150 remaining (SSH verified)
- [ ] Output <promise>SHADER_FIX_COMPLETE</promise>
