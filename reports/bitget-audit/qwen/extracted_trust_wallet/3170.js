try{let X=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},te=new X.Error().stack;te&&(X._sentryDebugIds=X._sentryDebugIds||{},X._sentryDebugIds[te]="1b4ae84c-0361-4b2c-869b-a1a69fa07c82",X._sentryDebugIdIdentifier="sentry-dbid-1b4ae84c-0361-4b2c-869b-a1a69fa07c82")}catch{}{let X=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};X.SENTRY_RELEASE={id:"2.66.0"}}(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[3170],{9505:((X,te,l)=>{l.d(te,{R:()=>Ie});var a=l(15192),Q=l(96540),Me=l(6442),Ne=Object.defineProperty,ee=Object.defineProperties,ne=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,Ae=(M,I,T)=>I in M?Ne(M,I,{enumerable:!0,configurable:!0,writable:!0,value:T}):M[I]=T,he=(M,I)=>{for(var T in I||(I={}))Oe.call(I,T)&&Ae(M,T,I[T]);if(Ee)for(var T of Ee(I))Le.call(I,T)&&Ae(M,T,I[T]);return M},c=(M,I)=>ee(M,ne(I));const se=({value:M,min:I,max:T})=>{const H={number:!1,min:!1,max:!1};if(!M)return c(he({},H),{isValid:!1});try{const G=(0,a.A)(M);H.number=!0,H.min=typeof I<"u"?G.gte((0,a.A)(I)):!0,H.max=typeof T<"u"?G.lte((0,a.A)(T)):!0}catch{}finally{return c(he({},H),{isValid:Object.values(H).every(G=>!!G)})}},Ie=({value:M,min:I,max:T})=>{const{formatMessage:H}=(0,Me.A)(),[G,Fe]=(0,Q.useState)({isValid:!1,number:!1,min:!1,max:!1});(0,Q.useEffect)(()=>{Fe(he({},se({value:M,min:I,max:T})))},[M,I,T]);const je=(0,Q.useMemo)(()=>{if(!G.number)return H({id:"validate-amount.generic"});if(!G.min)return H({id:"validate-amount.min"},{number:I});if(!G.max)return H({id:"validate-amount.max"},{number:T})},[H,G,I]);return{isValid:G.isValid,error:je}}}),93170:((X,te,l)=>{l.r(te),l.d(te,{App:()=>ht,default:()=>Bn});var a=l(74848),Q=l(47767),Me=l(15747),Ne=l(8457),ee=l(29584),ne=l(26264),Ee=l(23207),Oe=l(63369),Le=l(9505),Ae=l(38221),he=l.n(Ae),c=l(96540),se=l(6442),Ie=l(89408),M=l(22670),I=l(29305),T=l(64145),H=Object.defineProperty,G=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,je=Object.getOwnPropertySymbols,yt=Object.prototype.hasOwnProperty,bt=Object.prototype.propertyIsEnumerable,He=(e,t,n)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ge=(e,t)=>{for(var n in t||(t={}))yt.call(t,n)&&He(e,n,t[n]);if(je)for(var n of je(t))bt.call(t,n)&&He(e,n,t[n]);return e},ze=(e,t)=>G(e,Fe(t)),Qe=(e,t,n)=>new Promise((s,i)=>{var o=d=>{try{u(n.next(d))}catch(m){i(m)}},f=d=>{try{u(n.throw(d))}catch(m){i(m)}},u=d=>d.done?s(d.value):Promise.resolve(d.value).then(o,f);u((n=n.apply(e,t)).next())});const We=e=>Qe(null,[e],function*({value:t,blockchain:n,blockchainType:s,isAddingTokenManually:i}){try{if(i)return{asset:null,isValid:yield T.YW.emit(M.A.VALIDATE_CONTRACT_ADDRESS_FORMAT,{address:t,network:n}),intlErrorParams:[{id:"input-contract-address.validation.manual.wrong-address"},{}]};const o=yield(0,I.E)({address:t,blockchain:n,blockchainType:s}),f=yield T.YW.emit(Ie.A.VALIDATE_ASSET,o);return{asset:o,isValid:f.global,intlErrorParams:f.global?null:[{id:"input-contract-address.validation.metadata"},{a:u=>(0,a.jsx)("a",{href:"https://support.trustwallet.com/support/home",target:"_blank",rel:"noopener nofollow noreferrer",children:u})}]}}catch{return{asset:null,isValid:!1,intlErrorParams:[{id:"input-contract-address.validation.not-found"},{networkName:n.name}]}}}),gt=({value:e,blockchain:t,blockchainType:n,isAddingTokenManually:s})=>{const{formatMessage:i}=(0,se.A)(),[o,f]=(0,c.useState)({isValid:!1,isLoading:!1,asset:null}),u=(0,c.useRef)(!1),d=(0,c.useCallback)(he()(m=>Qe(null,[m],function*({blockchain:h,value:p}){u.current=!1;let S={isValid:!1,asset:null};p&&(S=yield We({value:p,blockchain:h,blockchainType:n,isAddingTokenManually:s})),!u.current&&f(ze(Ge({},S),{error:S.isValid||!S.intlErrorParams?void 0:i(...S.intlErrorParams),isLoading:!1}))}),200),[We,i]);return(0,c.useEffect)(()=>(f(m=>ze(Ge({},m),{isLoading:!0})),d({blockchain:t,value:e}),()=>{d.cancel(),u.current=!0}),[d,t,e]),o};var Ze=l(9814),Xe=l(62942),ke=l(63111),Je=l(65512),St=l(52619),Te=l(15351),Ue=l(65504),De=l(16665),Et=l(42201),ae=l(4800),qe=l(68632),Ot=l(88774),Z=l(52114),R=l(1279),At=l(77832),It=l(66737),jt=l(16638),le=l(40961),Tt=l(24867),Dt=l(1675),Pt=l(95060),Rt=l(37786),Pe=l(76339);function Ct(e,t){let n=(0,c.useRef)({left:0,top:0});if((0,Pe.s)(()=>{if(!t)return;let i=t.getBoundingClientRect();i&&(n.current=i)},[e,t]),t==null||!e||t===document.activeElement)return!1;let s=t.getBoundingClientRect();return s.top!==n.current.top||s.left!==n.current.left}var _e=l(96992),Mt=l(3321),j=l(95015),Nt=l(57575),Lt=l(34424),Ft=l(13674),Ut=l(28367),wt=l(74156),Bt=l(69821),Vt=l(86942),ye=l(98975);let et=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function tt(e){var t,n;let s=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return s;let o=!1;for(let u of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),o=!0;let f=o?(n=i.innerText)!=null?n:"":s;return et.test(f)&&(f=f.replace(et,"")),f}function Yt(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let s=n.split(" ").map(i=>{let o=document.getElementById(i);if(o){let f=o.getAttribute("aria-label");return typeof f=="string"?f.trim():tt(o).trim()}return null}).filter(Boolean);if(s.length>0)return s.join(", ")}return tt(e).trim()}function Kt(e){let t=(0,c.useRef)(""),n=(0,c.useRef)("");return(0,j._)(()=>{let s=e.current;if(!s)return"";let i=s.innerText;if(t.current===i)return n.current;let o=Yt(s).trim().toLowerCase();return t.current=i,n.current=o,o})}function nt(e){return[e.screenX,e.screenY]}function $t(){let e=(0,c.useRef)([-1,-1]);return{wasMoved(t){let n=nt(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=nt(t)}}}var st=l(92888),Ht=l(65448),ce=l(10375),Gt=l(82498);function zn({children:e,freeze:t}){let n=at(t,e);return r.createElement(r.Fragment,null,n)}function at(e,t){let[n,s]=(0,c.useState)(t);return!e&&n!==t&&s(t),e?n:t}var zt=l(15953),ue=l(13149),Qt=l(9685);function Wt(e){throw new Error("Unexpected object: "+e)}var C=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(C||{});function we(e,t){let n=t.resolveItems();if(n.length<=0)return null;let s=t.resolveActiveIndex(),i=s??-1;switch(e.focus){case 0:{for(let o=0;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return s}case 1:{i===-1&&(i=n.length);for(let o=i-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return s}case 2:{for(let o=i+1;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return s}case 3:{for(let o=n.length-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return s}case 4:{for(let o=0;o<n.length;++o)if(t.resolveId(n[o],o,n)===e.id)return o;return s}case 5:return null;default:Wt(e)}}var Zt=l(82599),ve=l(41741),Xt=l(43660),fe=l(85897),kt=l(2211),Y=l(66206),Jt=l(59124),L=l(44586),Be=l(90540),qt=l(78302),_t=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(_t||{}),en=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(en||{}),tn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(tn||{}),nn=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetOptionsElement=8]="SetOptionsElement",e))(nn||{});function Ve(e,t=n=>n){let n=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,s=(0,ve.wl)(t(e.options.slice()),o=>o.dataRef.current.domRef.current),i=n?s.indexOf(n):null;return i===-1&&(i=null),{options:s,activeOptionIndex:i}}let sn={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1,__demoMode:!1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:n}=e.dataRef.current,s=e.options.findIndex(i=>n(i.dataRef.current.value));return s!==-1&&(t=s),{...e,listboxState:0,activeOptionIndex:t,__demoMode:!1}},2(e,t){var n,s,i,o,f;if(e.dataRef.current.disabled||e.listboxState===1)return e;let u={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===C.Nothing)return{...u,activeOptionIndex:null};if(t.focus===C.Specific)return{...u,activeOptionIndex:e.options.findIndex(h=>h.id===t.id)};if(t.focus===C.Previous){let h=e.activeOptionIndex;if(h!==null){let p=e.options[h].dataRef.current.domRef,S=we(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:E=>E.id,resolveDisabled:E=>E.dataRef.current.disabled});if(S!==null){let E=e.options[S].dataRef.current.domRef;if(((s=p.current)==null?void 0:s.previousElementSibling)===E.current||((i=E.current)==null?void 0:i.previousElementSibling)===null)return{...u,activeOptionIndex:S}}}}else if(t.focus===C.Next){let h=e.activeOptionIndex;if(h!==null){let p=e.options[h].dataRef.current.domRef,S=we(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:E=>E.id,resolveDisabled:E=>E.dataRef.current.disabled});if(S!==null){let E=e.options[S].dataRef.current.domRef;if(((o=p.current)==null?void 0:o.nextElementSibling)===E.current||((f=E.current)==null?void 0:f.nextElementSibling)===null)return{...u,activeOptionIndex:S}}}}let d=Ve(e),m=we(t,{resolveItems:()=>d.options,resolveActiveIndex:()=>d.activeOptionIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});return{...u,...d,activeOptionIndex:m}},3:(e,t)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let n=e.searchQuery!==""?0:1,s=e.searchQuery+t.value.toLowerCase(),i=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find(f=>{var u;return!f.dataRef.current.disabled&&((u=f.dataRef.current.textValue)==null?void 0:u.startsWith(s))}),o=i?e.options.indexOf(i):-1;return o===-1||o===e.activeOptionIndex?{...e,searchQuery:s}:{...e,searchQuery:s,activeOptionIndex:o,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,t)=>{let n={id:t.id,dataRef:t.dataRef},s=Ve(e,i=>[...i,n]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(s.activeOptionIndex=s.options.indexOf(n)),{...e,...s}},6:(e,t)=>{let n=Ve(e,s=>{let i=s.findIndex(o=>o.id===t.id);return i!==-1&&s.splice(i,1),s});return{...e,...n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.optionsElement===t.element?e:{...e,optionsElement:t.element}},Ye=(0,c.createContext)(null);Ye.displayName="ListboxActionsContext";function Re(e){let t=(0,c.useContext)(Ye);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Re),n}return t}let Ce=(0,c.createContext)(null);Ce.displayName="ListboxDataContext";function be(e){let t=(0,c.useContext)(Ce);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,be),n}return t}function an(e,t){return(0,fe.Y)(t.type,sn,e,t)}let ln=c.Fragment;function on(e,t){var n;let s=(0,Ht._)(),{value:i,defaultValue:o,form:f,name:u,onChange:d,by:m,invalid:h=!1,disabled:p=s||!1,horizontal:S=!1,multiple:E=!1,__demoMode:v=!1,...O}=e;const k=S?"horizontal":"vertical";let z=(0,ye.P)(t),N=(0,Rt.K)(o),[D=E?[]:void 0,F]=(0,Pt.P)(i,d,N),[K,P]=(0,c.useReducer)(an,{dataRef:(0,c.createRef)(),listboxState:v?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,optionsVisible:!1,buttonElement:null,optionsElement:null,__demoMode:v}),w=(0,c.useRef)({static:!1,hold:!1}),J=(0,c.useRef)(new Map),x=(0,Dt.t)(m),V=(0,c.useCallback)(A=>(0,fe.Y)(y.mode,{1:()=>D.some(U=>x(U,A)),0:()=>x(D,A)}),[D]),y=(0,c.useMemo)(()=>({...K,value:D,disabled:p,invalid:h,mode:E?1:0,orientation:k,compare:x,isSelected:V,optionsPropsRef:w,listRef:J}),[D,p,h,E,K,J]);(0,Pe.s)(()=>{K.dataRef.current=y},[y]);let W=y.listboxState===0;(0,Ut.j)(W,[y.buttonElement,y.optionsElement],(A,U)=>{var q;P({type:1}),(0,ve.Bm)(U,ve.MZ.Loose)||(A.preventDefault(),(q=y.buttonElement)==null||q.focus())});let me=(0,c.useMemo)(()=>({open:y.listboxState===0,disabled:p,invalid:h,value:D}),[y,p,D,h]),$=(0,j._)(A=>{let U=y.options.find(q=>q.id===A);U&&de(U.dataRef.current.value)}),_=(0,j._)(()=>{if(y.activeOptionIndex!==null){let{dataRef:A,id:U}=y.options[y.activeOptionIndex];de(A.current.value),P({type:2,focus:C.Specific,id:U})}}),pe=(0,j._)(()=>P({type:0})),oe=(0,j._)(()=>P({type:1})),re=(0,_e.L)(),ge=(0,j._)((A,U,q)=>{re.dispose(),re.microTask(()=>A===C.Specific?P({type:2,focus:C.Specific,id:U,trigger:q}):P({type:2,focus:A,trigger:q}))}),ie=(0,j._)((A,U)=>(P({type:5,id:A,dataRef:U}),()=>P({type:6,id:A}))),de=(0,j._)(A=>(0,fe.Y)(y.mode,{0(){return F?.(A)},1(){let U=y.value.slice(),q=U.findIndex(Gn=>x(Gn,A));return q===-1?U.push(A):U.splice(q,1),F?.(U)}})),Se=(0,j._)(A=>P({type:3,value:A})),b=(0,j._)(()=>P({type:4})),g=(0,j._)(A=>{P({type:7,element:A})}),B=(0,j._)(A=>{P({type:8,element:A})}),xe=(0,c.useMemo)(()=>({onChange:de,registerOption:ie,goToOption:ge,closeListbox:oe,openListbox:pe,selectActiveOption:_,selectOption:$,search:Se,clearSearch:b,setButtonElement:g,setOptionsElement:B}),[]),[Vn,Yn]=(0,Be.b0)({inherit:!0}),Kn={ref:z},$n=(0,c.useCallback)(()=>{if(N!==void 0)return F?.(N)},[F,N]),Hn=(0,Y.Ci)();return c.createElement(Yn,{value:Vn,props:{htmlFor:(n=y.buttonElement)==null?void 0:n.id},slot:{open:y.listboxState===0,disabled:p}},c.createElement(ce.St,null,c.createElement(Ye.Provider,{value:xe},c.createElement(Ce.Provider,{value:y},c.createElement(ue.El,{value:(0,fe.Y)(y.listboxState,{0:ue.Uw.Open,1:ue.Uw.Closed})},u!=null&&D!=null&&c.createElement(Gt.CL,{disabled:p,data:{[u]:D},form:f,onReset:$n}),Hn({ourProps:Kn,theirProps:O,slot:me,defaultTag:ln,name:"Listbox"}))))))}let rn="button";function dn(e,t){var n;let s=be("Listbox.Button"),i=Re("Listbox.Button"),o=(0,c.useId)(),f=(0,zt.q)(),{id:u=f||`headlessui-listbox-button-${o}`,disabled:d=s.disabled||!1,autoFocus:m=!1,...h}=e,p=(0,ye.P)(t,(0,ce.Xc)(),i.setButtonElement),S=(0,ce.TI)(),E=(0,j._)(y=>{switch(y.key){case L.D.Enter:(0,Xt.q)(y.currentTarget);break;case L.D.Space:case L.D.ArrowDown:y.preventDefault(),(0,le.flushSync)(()=>i.openListbox()),s.value||i.goToOption(C.First);break;case L.D.ArrowUp:y.preventDefault(),(0,le.flushSync)(()=>i.openListbox()),s.value||i.goToOption(C.Last);break}}),v=(0,j._)(y=>{switch(y.key){case L.D.Space:y.preventDefault();break}}),O=(0,j._)(y=>{var W;if((0,Qt.l)(y.currentTarget))return y.preventDefault();s.listboxState===0?((0,le.flushSync)(()=>i.closeListbox()),(W=s.buttonElement)==null||W.focus({preventScroll:!0})):(y.preventDefault(),i.openListbox())}),k=(0,j._)(y=>y.preventDefault()),z=(0,Be.o2)([u]),N=(0,Jt.MM)(),{isFocusVisible:D,focusProps:F}=(0,It.o)({autoFocus:m}),{isHovered:K,hoverProps:P}=(0,jt.M)({isDisabled:d}),{pressed:w,pressProps:J}=(0,Tt.Z)({disabled:d}),x=(0,c.useMemo)(()=>({open:s.listboxState===0,active:w||s.listboxState===0,disabled:d,invalid:s.invalid,value:s.value,hover:K,focus:D,autofocus:m}),[s.listboxState,s.value,d,K,D,w,s.invalid,m]),V=(0,Y.v6)(S(),{ref:p,id:u,type:(0,Bt.c)(e,s.buttonElement),"aria-haspopup":"listbox","aria-controls":(n=s.optionsElement)==null?void 0:n.id,"aria-expanded":s.listboxState===0,"aria-labelledby":z,"aria-describedby":N,disabled:d||void 0,autoFocus:m,onKeyDown:E,onKeyUp:v,onKeyPress:k,onClick:O},F,P,J);return(0,Y.Ci)()({ourProps:V,theirProps:h,slot:x,defaultTag:rn,name:"Listbox.Button"})}let lt=(0,c.createContext)(!1),cn="div",un=Y.Ac.RenderStrategy|Y.Ac.Static;function vn(e,t){var n,s;let i=(0,c.useId)(),{id:o=`headlessui-listbox-options-${i}`,anchor:f,portal:u=!1,modal:d=!0,transition:m=!1,...h}=e,p=(0,ce.zn)(f),[S,E]=(0,c.useState)(null);p&&(u=!0);let v=be("Listbox.Options"),O=Re("Listbox.Options"),k=(0,wt.g)(v.optionsElement),z=(0,ue.O_)(),[N,D]=(0,st.p)(m,S,z!==null?(z&ue.Uw.Open)===ue.Uw.Open:v.listboxState===0);(0,Ft.O)(N,v.buttonElement,O.closeListbox);let F=v.__demoMode?!1:d&&v.listboxState===0;(0,Vt.K)(F,k);let K=v.__demoMode?!1:d&&v.listboxState===0;(0,Nt.v)(K,{allowed:(0,c.useCallback)(()=>[v.buttonElement,v.optionsElement],[v.buttonElement,v.optionsElement])});let P=v.listboxState!==0,w=Ct(P,v.buttonElement)?!1:N,J=N&&v.listboxState===1,x=at(J,v.value),V=(0,j._)(b=>v.compare(x,b)),y=(0,c.useMemo)(()=>{var b;if(p==null||!((b=p?.to)!=null&&b.includes("selection")))return null;let g=v.options.findIndex(B=>V(B.dataRef.current.value));return g===-1&&(g=0),g},[p,v.options]),W=(()=>{if(p==null)return;if(y===null)return{...p,inner:void 0};let b=Array.from(v.listRef.current.values());return{...p,inner:{listRef:{current:b},index:y}}})(),[me,$]=(0,ce.UF)(W),_=(0,ce.G3)(),pe=(0,ye.P)(t,p?me:null,O.setOptionsElement,E),oe=(0,_e.L)();(0,c.useEffect)(()=>{var b;let g=v.optionsElement;g&&v.listboxState===0&&g!==((b=(0,kt.T)(g))==null?void 0:b.activeElement)&&g?.focus({preventScroll:!0})},[v.listboxState,v.optionsElement]);let re=(0,j._)(b=>{var g,B;switch(oe.dispose(),b.key){case L.D.Space:if(v.searchQuery!=="")return b.preventDefault(),b.stopPropagation(),O.search(b.key);case L.D.Enter:if(b.preventDefault(),b.stopPropagation(),v.activeOptionIndex!==null){let{dataRef:xe}=v.options[v.activeOptionIndex];O.onChange(xe.current.value)}v.mode===0&&((0,le.flushSync)(()=>O.closeListbox()),(g=v.buttonElement)==null||g.focus({preventScroll:!0}));break;case(0,fe.Y)(v.orientation,{vertical:L.D.ArrowDown,horizontal:L.D.ArrowRight}):return b.preventDefault(),b.stopPropagation(),O.goToOption(C.Next);case(0,fe.Y)(v.orientation,{vertical:L.D.ArrowUp,horizontal:L.D.ArrowLeft}):return b.preventDefault(),b.stopPropagation(),O.goToOption(C.Previous);case L.D.Home:case L.D.PageUp:return b.preventDefault(),b.stopPropagation(),O.goToOption(C.First);case L.D.End:case L.D.PageDown:return b.preventDefault(),b.stopPropagation(),O.goToOption(C.Last);case L.D.Escape:b.preventDefault(),b.stopPropagation(),(0,le.flushSync)(()=>O.closeListbox()),(B=v.buttonElement)==null||B.focus({preventScroll:!0});return;case L.D.Tab:b.preventDefault(),b.stopPropagation(),(0,le.flushSync)(()=>O.closeListbox()),(0,ve.p9)(v.buttonElement,b.shiftKey?ve.BD.Previous:ve.BD.Next);break;default:b.key.length===1&&(O.search(b.key),oe.setTimeout(()=>O.clearSearch(),350));break}}),ge=(n=v.buttonElement)==null?void 0:n.id,ie=(0,c.useMemo)(()=>({open:v.listboxState===0}),[v.listboxState]),de=(0,Y.v6)(p?_():{},{id:o,ref:pe,"aria-activedescendant":v.activeOptionIndex===null||(s=v.options[v.activeOptionIndex])==null?void 0:s.id,"aria-multiselectable":v.mode===1?!0:void 0,"aria-labelledby":ge,"aria-orientation":v.orientation,onKeyDown:re,role:"listbox",tabIndex:v.listboxState===0?0:void 0,style:{...h.style,...$,"--button-width":(0,Mt.L)(v.buttonElement,!0).width},...(0,st.B)(D)}),Se=(0,Y.Ci)();return c.createElement(qt.ZL,{enabled:u?e.static||N:!1},c.createElement(Ce.Provider,{value:v.mode===1?v:{...v,isSelected:V}},Se({ourProps:de,theirProps:h,slot:ie,defaultTag:cn,features:un,visible:w,name:"Listbox.Options"})))}let fn="div";function mn(e,t){let n=(0,c.useId)(),{id:s=`headlessui-listbox-option-${n}`,disabled:i=!1,value:o,...f}=e,u=(0,c.useContext)(lt)===!0,d=be("Listbox.Option"),m=Re("Listbox.Option"),h=d.activeOptionIndex!==null?d.options[d.activeOptionIndex].id===s:!1,p=d.isSelected(o),S=(0,c.useRef)(null),E=Kt(S),v=(0,Lt.Y)({disabled:i,value:o,domRef:S,get textValue(){return E()}}),O=(0,ye.P)(t,S,x=>{x?d.listRef.current.set(s,x):d.listRef.current.delete(s)});(0,Pe.s)(()=>{if(!d.__demoMode&&d.listboxState===0&&h&&d.activationTrigger!==0)return(0,Zt.e)().requestAnimationFrame(()=>{var x,V;(V=(x=S.current)==null?void 0:x.scrollIntoView)==null||V.call(x,{block:"nearest"})})},[S,h,d.__demoMode,d.listboxState,d.activationTrigger,d.activeOptionIndex]),(0,Pe.s)(()=>{if(!u)return m.registerOption(s,v)},[v,s,u]);let k=(0,j._)(x=>{var V;if(i)return x.preventDefault();m.onChange(o),d.mode===0&&((0,le.flushSync)(()=>m.closeListbox()),(V=d.buttonElement)==null||V.focus({preventScroll:!0}))}),z=(0,j._)(()=>{if(i)return m.goToOption(C.Nothing);m.goToOption(C.Specific,s)}),N=$t(),D=(0,j._)(x=>{N.update(x),!i&&(h||m.goToOption(C.Specific,s,0))}),F=(0,j._)(x=>{N.wasMoved(x)&&(i||h||m.goToOption(C.Specific,s,0))}),K=(0,j._)(x=>{N.wasMoved(x)&&(i||h&&m.goToOption(C.Nothing))}),P=(0,c.useMemo)(()=>({active:h,focus:h,selected:p,disabled:i,selectedOption:p&&u}),[h,p,i,u]),w=u?{}:{id:s,ref:O,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":p,disabled:void 0,onClick:k,onFocus:z,onPointerEnter:D,onMouseEnter:D,onPointerMove:F,onMouseMove:F,onPointerLeave:K,onMouseLeave:K},J=(0,Y.Ci)();return!p&&u?null:J({ourProps:w,theirProps:f,slot:P,defaultTag:fn,name:"Listbox.Option"})}let pn=c.Fragment;function xn(e,t){let{options:n,placeholder:s,...i}=e,o={ref:(0,ye.P)(t)},f=be("ListboxSelectedOption"),u=(0,c.useMemo)(()=>({}),[]),d=f.value===void 0||f.value===null||f.mode===1&&Array.isArray(f.value)&&f.value.length===0,m=(0,Y.Ci)();return c.createElement(lt.Provider,{value:!0},m({ourProps:o,theirProps:{...i,children:c.createElement(c.Fragment,null,s&&d?s:n)},slot:u,defaultTag:pn,name:"ListboxSelectedOption"}))}let hn=(0,Y.FX)(on),ot=(0,Y.FX)(dn),yn=Be.JU,rt=(0,Y.FX)(vn),it=(0,Y.FX)(mn),bn=(0,Y.FX)(xn),gn=Object.assign(hn,{Button:ot,Label:yn,Options:rt,Option:it,SelectedOption:bn});const Sn=({options:e,selected:t,setSelected:n,label:s,testid:i})=>(0,a.jsxs)("div",{className:"w-full",children:[s&&(0,a.jsx)(Z.E,{children:s}),(0,a.jsx)(gn,{value:t,by:"id",onChange:n,children:(0,a.jsxs)("div",{className:"relative w-full mt-1",children:[(0,a.jsxs)(ot,{"data-testid":i,className:"relative w-full cursor-default input-field title-text font-medium h-12",children:[(0,a.jsx)("span",{className:"block truncate",children:t.name}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,a.jsx)(Te.D,{width:20,height:20,colorClass:"text-iconNormal"})})]}),(0,a.jsx)(At.e,{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(rt,{as:"ul",className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded bg-bg3 py-1 shadow-lg focus:outline-none",children:e.map(o=>(0,a.jsx)(it,{as:"li","data-testid":`${i}-option`,className:"relative cursor-default select-none px-4 py-2",value:o,children:({selected:f})=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex flex-1",children:(0,a.jsx)(Z.E,{type:R.jK.TITLE,theme:f?R.Il.BRAND:R.Il.PRIMARY,truncated:!0,children:o.name})}),f&&(0,a.jsx)("div",{children:(0,a.jsx)(Ot.S,{colorClass:"text-primary"})})]})},o.id))})})]})})]});var En=l(75485),Ke=l(28398),dt=l(10537),ct=l(15078);class $e extends Error{constructor(t){super(t),this.name="NetworkError",Object.setPrototypeOf(this,$e.prototype)}}var On=l(80179),An=l(97286),In=l(152),jn=l(32669),Tn=l(19376),ut=l(73241);const Dn=({asset:e,blockchain:t})=>{var n;const{formatMessage:s}=(0,se.A)();return(0,a.jsx)(In.Z,{theme:jn.R.NEUTRAL,noPadding:!0,children:(0,a.jsxs)("div",{className:"flex justify-between p-4 space-x-2 items-center",children:[(0,a.jsx)("div",{children:(0,a.jsx)(Ue.q,{name:e.name,src:e.iconUrl,network:e.address?t:void 0})}),(0,a.jsxs)("div",{className:"flex flex-col flex-grow space-y-1",children:[(0,a.jsxs)("div",{className:"flex flex-row space-x-1",children:[(0,a.jsx)("div",{children:(0,a.jsx)(Z.E,{type:R.jK.SUBHEADER_16,testid:"custom-asset-asset-name",children:e.name})}),(0,a.jsx)("div",{children:e.type&&(0,a.jsx)(Tn.v,{size:ut.V.SMALL,theme:ut.x.SECONDARY,testid:"custom-asset-asset-type",children:e.type})})]}),(0,a.jsx)("div",{children:(0,a.jsx)(Z.E,{type:R.jK.SUBHEADER_14,theme:R.Il.UTILITY_1_OPACITY_1,weight:R.nG.NORMAL,testid:"custom-asset-asset-network-name",children:(n=t.displayName)!=null?n:t.name})})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1 text-right",children:[(0,a.jsx)("div",{children:(0,a.jsx)(Z.E,{type:R.jK.SUBHEADER_16,testid:"custom-asset-asset-symbol",children:e.symbol})}),(0,a.jsx)("div",{children:(0,a.jsx)(Z.E,{type:R.jK.SUBHEADER_14,theme:R.Il.UTILITY_1_OPACITY_1,weight:R.nG.NORMAL,testid:"custom-asset-asset-decimals",children:s({id:"input-contract-address.decimals"},{decimals:e.decimals})})})]})]})})};var vt=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,Cn=(e,t)=>{var n={};for(var s in e)Pn.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&vt)for(var s of vt(e))t.indexOf(s)<0&&Rn.call(e,s)&&(n[s]=e[s]);return n},ft=(e,t,n)=>new Promise((s,i)=>{var o=d=>{try{u(n.next(d))}catch(m){i(m)}},f=d=>{try{u(n.throw(d))}catch(m){i(m)}},u=d=>d.done?s(d.value):Promise.resolve(d.value).then(o,f);u((n=n.apply(e,t)).next())});const mt=()=>{const{blockchainId:e,blockchainType:t,contractAddress:n}=(0,Q.g)(),{trackAnalytics:s}=(0,Ee.s)();if(!e)throw new Error("Blockchain id is invalid.");if(!t)throw new Error("Blockchain type is invalid.");const i=(0,dt.n)(),o=(0,ct.I)(),f=(0,c.useMemo)(()=>(0,Me.rN)(e,t===Ke.l.CUSTOM,i,o),[e,t,i,o]);if(!f)throw new Error(`Could not find network with blockchain ID "${e}".`);const{formatMessage:u}=(0,se.A)(),d=(0,Q.Zp)(),[m,h]=(0,c.useState)(!1),[p,S]=(0,c.useState)(n??""),[E,v]=(0,c.useState)(""),[O,k]=(0,c.useState)(""),[z,N]=(0,c.useState)(""),[D,F]=(0,c.useState)(""),[K,P]=(0,c.useState)({decimals:!1}),[w,J]=(0,c.useState)(),x=location.href.includes("manual");(0,Oe.K)({event:x?ee.Un.CUSTOM_ASSET_ADD_ASSET_MANUALLY:ee.Un.CUSTOM_ASSET_ADD_ASSET,props:null});const{data:V}=(0,An.I)({queryKey:["tokens-map"],queryFn:()=>T.YW.emit(M.A.FETCH_TOKEN_TYPES)}),W=(0,c.useMemo)(()=>new Map(Object.entries(V||[]).filter(([g,B])=>!0)),[V]).get(e),me=gt({value:p,blockchain:f,blockchainType:t,isAddingTokenManually:x}),{asset:$}=me,_=Cn(me,["asset"]),pe=(0,Ze.u)({value:O}),oe=(0,Ze.u)({value:z}),re=(0,Le.R)({value:D,min:0,max:32}),ge=x?_.isValid&&pe.isValid&&oe.isValid&&re.isValid&&(W?!!w:!0):_.isValid,ie=(0,c.useMemo)(()=>{if(x)return{name:O,symbol:z,decimals:parseInt(D),blockchainId:f.id,address:p,balance:"0",isShownInHomeScreen:!0,isUserCustomAsset:!0,assetId:(0,En.Gc)({coinId:f.coinId,address:p})||"",type:w?.id}},[x,O,z,D,f,p,w?.id]),de=(0,c.useCallback)(g=>ft(null,null,function*(){if(g.preventDefault(),!(!$&&!ie)){h(!0),v("");try{const B=x?ie:$;yield T.YW.emit(Ie.A.ADD_ASSET,{asset:B,blockchainType:t}),s({event:ee.BQ.ADD_CUSTOM_ASSET,props:{pageViewSource:x?ee.Un.CUSTOM_ASSET_ADD_ASSET_MANUALLY:ee.Un.CUSTOM_ASSET_ADD_ASSET,assetName:B.name,assetId:B.assetId,blockchainId:B.blockchainId}}),d(ne.b.DEFAULT)}catch(B){v(B.name===$e.name?"generic.network-error":"add-asset.register-error")}finally{h(!1)}}}),[$,t,x,ie,d,s]),Se=()=>ft(null,null,function*(){yield(0,On.V3)(`${ne.b.CUSTOM_ASSET_ADD_ASSET}/${t}/${f.id}/manual/${p}`)}),b=g=>{v(""),S(g.target.value.trim()),P({decimals:!1})};return(0,c.useEffect)(()=>{$&&(k($.name),N($.symbol),F(String($.decimals)),P({decimals:!0}))},[$]),(0,a.jsxs)(ae.LN,{children:[!x&&(0,a.jsx)(ae.zY,{backAction:()=>d(-1),title:u({id:"add-custom-asset.title"})}),(0,a.jsxs)(ae.Gv,{children:[x&&(0,a.jsx)("div",{className:"flex my-11 justify-center",children:(0,a.jsx)(Ne.A,{})}),(0,a.jsxs)("div",{className:`flex h-full flex-col flex-1 ${x?"bg-backgroundPrimary border border-line rounded p-6":""}`,children:[x&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(Z.E,{type:R.jK.HEADLINE,children:u({id:"add-custom-asset.title"})})}),(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-1 pt-2",children:[(0,a.jsx)(Ue.q,{name:f.name,src:f.iconUrl,size:qe.Y.LARGE}),(0,a.jsx)(Z.E,{theme:R.Il.SECONDARY,weight:R.nG.NORMAL,children:u({id:"generic.on-network"},{networkName:f.displayName||f.name})})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-6 mt-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)(De.S,{testid:"custom-asset-address-input",value:p,onChange:b,validation:_,placeholder:u({id:"input-contract-address.label"}),autoFocus:!0})}),x&&(0,a.jsxs)(a.Fragment,{children:[!!W&&(0,a.jsx)(Sn,{testid:"custom-asset-type-select",label:u({id:"custom-asset.token-type"}),selected:w??{id:Object.entries(W)[0][0],name:Object.entries(W)[0][1].name},setSelected:g=>J(g),options:Object.entries(W).map(([g,B])=>{var xe;return{id:g,name:(xe=B.name)!=null?xe:g}})}),(0,a.jsx)("div",{children:(0,a.jsx)(De.S,{testid:"custom-asset-name-input",value:O,onChange:g=>k(g.target.value),label:u({id:"custom-asset.token-name"}),validation:pe})}),(0,a.jsx)("div",{children:(0,a.jsx)(De.S,{testid:"custom-asset-symbol-input",value:z,onChange:g=>N(g.target.value),label:u({id:"custom-asset.token-symbol"}),validation:oe})}),(0,a.jsx)("div",{children:(0,a.jsx)(De.S,{disabled:K.decimals,readOnly:K.decimals,testid:"custom-asset-decimals-input",value:D,type:Et.Ih.NUMBER,onChange:g=>F(g.target.value),label:u({id:"custom-asset.token-decimals"}),validation:re})})]}),!x&&_.isValid&&$&&(0,a.jsxs)("div",{className:"flex flex-col items-center -mt-3",children:[(0,a.jsxs)("div",{className:"flex flex-col mb-4 *:-mb-[18px]",children:[(0,a.jsx)(Te.D,{width:24,height:24,colorClass:"text-utility-1-opacity-3"}),(0,a.jsx)(Te.D,{width:24,height:24,colorClass:"text-utility-1-opacity-2"}),(0,a.jsx)(Te.D,{width:24,height:24,colorClass:"text-utility-1-opacity-1"})]}),(0,a.jsx)("div",{className:"pb-3",children:(0,a.jsx)(Z.E,{weight:R.nG.NORMAL,theme:R.Il.UTILITY_1_OPACITY_1,children:u({id:"input-contract-address.confirmation"})})}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(Dn,{asset:$,blockchain:f})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end flex-1 flex-col space-y-4 pt-6",children:[(0,a.jsx)(Xe.F,{theme:ke.Z.WARNING,children:u({id:"add-asset.warning"},{b:g=>(0,a.jsx)("span",{className:"font-medium",children:g})})}),E&&(0,a.jsx)(Xe.F,{theme:ke.Z.ERROR,children:u({id:E})}),!x&&p&&(0,a.jsx)(Je.$,{testid:"custom-asset-add-token-manually-button",theme:St.ry.TRANSPARENT,onClick:Se,children:(0,a.jsx)(Z.E,{theme:R.Il.PRIMARY_DEFAULT,type:R.jK.SUBHEADER_16,children:u({id:"add-asset.btn-add-token-manually"})})}),(0,a.jsx)(Je.$,{testid:"custom-asset-add-token-button",onClick:de,disabled:!ge,loading:m||_.isLoading,children:u({id:"add-asset.btn-add-asset"})})]})]})]})]})};var Mn=l(33055),pt=l(29251),Nn=l(94893),Ln=l(41327);const xt=({name:e,iconUrl:t,onClick:n})=>(0,a.jsx)(Nn.c,{onClick:n,children:(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 px-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(Ue.q,{name:e,src:t,size:qe.Y.MEDIUM,abstractFallback:!0}),(0,a.jsx)(Z.E,{type:R.jK.SUBHEADER_16,children:e})]}),(0,a.jsx)("div",{children:(0,a.jsx)(Ln.v,{width:20,height:20,colorClass:"text-utility-1-opacity-1"})})]})});var Fn=l(69275);const Un=()=>{const e=(0,Q.Zp)(),{formatMessage:t}=(0,se.A)(),n=(0,Mn.A)(),s=(0,dt.n)(!0),i=(0,ct.I)(!0),o=(0,Fn.o)(),f=(0,c.useCallback)(d=>!!o[d],[o]),u=(0,c.useMemo)(()=>s.filter(d=>{const m=n.type!==pt.S.HARDWARE&&n.type!==pt.S.PRIVATE_KEY,h=f(d.coinId);return(m||h)&&d.customTokensEnabled}),[s,n.type,f]);return(0,a.jsxs)("div",{className:"space-y-4",children:[u.map(d=>{var m;return(0,a.jsx)(xt,{name:(m=d.displayName)!=null?m:d.name,iconUrl:d.iconUrl,onClick:()=>e(`${ne.b.CUSTOM_ASSET_ADD_ASSET}/${Ke.l.MAIN}/${d.id}`)},d.id)}),i.map(d=>{var m;return(0,a.jsx)(xt,{name:(m=d.displayName)!=null?m:d.name,iconUrl:d.iconUrl,onClick:()=>e(`${ne.b.CUSTOM_ASSET_ADD_ASSET}/${Ke.l.CUSTOM}/${d.id}`)},d.id)})]})},wn=()=>{(0,Oe.K)({event:ee.Un.CUSTOM_ASSET_SELECT_NETWORK,props:null});const{formatMessage:e}=(0,se.A)(),t=(0,Q.Zp)(),n=(0,c.useCallback)(()=>{t(ne.b.MANAGE_CRYPTO)},[t]);return(0,a.jsxs)(ae.LN,{children:[(0,a.jsx)(ae.zY,{backAction:n,title:e({id:"network.header"})}),(0,a.jsx)(ae.Gv,{children:(0,a.jsx)(ae.LO,{children:(0,a.jsx)(Un,{})})})]})},ht=()=>(0,a.jsxs)(Q.BV,{children:[(0,a.jsx)(Q.qh,{path:"/select-network",element:(0,a.jsx)(wn,{})}),(0,a.jsx)(Q.qh,{path:"/add-asset/:blockchainType/:blockchainId",element:(0,a.jsx)(mt,{})}),(0,a.jsx)(Q.qh,{path:"/add-asset/:blockchainType/:blockchainId/manual/:contractAddress?",element:(0,a.jsx)(mt,{})})]}),Bn=ht})}]);

//# sourceMappingURL=3170.js.map