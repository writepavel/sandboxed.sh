try{let y=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},E=new y.Error().stack;E&&(y._sentryDebugIds=y._sentryDebugIds||{},y._sentryDebugIds[E]="e98d3da1-d2bc-4a66-aa3f-aa920760a4b1",y._sentryDebugIdIdentifier="sentry-dbid-e98d3da1-d2bc-4a66-aa3f-aa920760a4b1")}catch{}{let y=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};y.SENTRY_RELEASE={id:"2.66.0"}}(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[1627],{6475:((y,E,e)=>{e.d(E,{q:()=>W});var n=e(1651),A=e(58959),O=class extends n.${constructor(l,c){super(l,c)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(l,c){super.setOptions({...l,behavior:(0,A.PL)()},c)}getOptimisticResult(l){return l.behavior=(0,A.PL)(),super.getOptimisticResult(l)}fetchNextPage(l){return this.fetch({...l,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(l){return this.fetch({...l,meta:{fetchMore:{direction:"backward"}}})}createResult(l,c){const{state:C}=l,I=super.createResult(l,c),{isFetching:o,isRefetching:L,isError:b,isRefetchError:Q}=I,D=C.fetchMeta?.fetchMore?.direction,F=b&&D==="forward",g=o&&D==="forward",j=b&&D==="backward",u=o&&D==="backward";return{...I,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,A.rB)(c,C.data),hasPreviousPage:(0,A.RQ)(c,C.data),isFetchNextPageError:F,isFetchingNextPage:g,isFetchPreviousPageError:j,isFetchingPreviousPage:u,isRefetchError:Q&&!F&&!j,isRefetching:L&&!g&&!u}}},r=e(44171);function W(l,c){return(0,r.t)(l,O,c)}}),21627:((y,E,e)=>{e.r(E),e.d(E,{default:()=>Ge});var n=e(74848),A=e(95455),O=e(29584),r=e(26264),W=e(63369),l=e(65512),c=e(52619),C=e(69666),I=e(2543),o=e(96540),L=e(6442),b=e(67008);const Q=({onClick:t,testid:s})=>{const{formatMessage:a}=(0,L.A)(),f=(0,o.useMemo)(()=>(0,I.uniqueId)("import-info-action-"),[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{"data-tooltip-id":f,"data-tooltip-content":a({id:"manage-crypto.info-action.text"}),children:(0,n.jsx)(l.$,{testid:s,size:c.Vp.SMALL,shape:c.dB.ICON_SQUARE,theme:c.ry.TRANSPARENT,noPadding:!0,onClick:t,children:(0,n.jsx)(C.c,{colorClass:"text-utility-1-opacity-1"})})}),(0,n.jsx)(b.m_,{id:f,className:"tw-tooltip"})]})};var D=e(8360),F=e(55418),g=e(4800),j=e(68632),u=e(79830),$=e(52114),H=e(1279),se=e(38795),Ae=e(47991),Ce=e(10537),je=e(15078),Ne=Object.defineProperty,De=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,ue=(t,s,a)=>s in t?Ne(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,p=(t,s)=>{for(var a in s||(s={}))Oe.call(s,a)&&ue(t,a,s[a]);if(de)for(var a of de(s))Le.call(s,a)&&ue(t,a,s[a]);return t},w=(t,s)=>De(t,Me(s));const x=(t,s)=>t.symbol.localeCompare(s.symbol),U=()=>{const t=(0,Ae.P)(),s=(0,Ce.n)(),a=(0,je.I)(),f=p(p({},s),a);return(0,o.useMemo)(()=>t.reduce((m,P)=>(f[P.blockchainId]&&m.push(w(p({},P),{blockchain:f[P.blockchainId]})),m),[]).sort(x),[t,s,a])};var K=e(47767),z=e(67310),ne=e(23207),M=e(50882),k=e(94893),ae=e(65504),oe=e(33647),q=e(19376),X=e(73241),Te=e(64145),_=e(98939),Be=e(89408),ee=e(75485),Re=e(67658),he=e(33055),ve=e(69275),be=e(9389),V=e(29251),Z=e(3958),Y=(t,s,a)=>new Promise((f,m)=>{var P=v=>{try{J(a.next(v))}catch(B){m(B)}},h=v=>{try{J(a.throw(v))}catch(B){m(B)}},J=v=>v.done?f(v.value):Promise.resolve(v.value).then(P,h);J((a=a.apply(t,s)).next())});const Fe=({asset:t,onAssetToggle:s})=>{var a;const{trackAnalytics:f}=(0,ne.s)(),{formatMessage:m}=(0,L.A)(),P=(0,K.Zp)(),[h,J]=(0,o.useState)(t.isShownInHomeScreen),[v,B]=(0,o.useState)(!1),xe=(0,he.A)(),R=(0,be.YL)(),Pe=(0,ve.o)(),ie=G=>Y(null,null,function*(){s(G),J(!G.isShownInHomeScreen),B(!0),yield(0,Z.A)(Te.YW.emit(Be.A.TOGGLE_ASSET_VISIBILITY,G),250),B(!1)}),N=(0,Re.A)(t),S=(0,o.useMemo)(()=>{const G=N.isCustom?_.hF.Ethereum.toString():(0,ee.$5)(t.assetId).coinId;return!Pe[G]},[Pe,N]),te=(0,o.useMemo)(()=>S&&xe.type===V.S.MNEMONIC&&R.derivationIndex>0,[xe,R,S]);if(!N)return null;const Se=()=>Y(null,null,function*(){S||(h||(yield ie(t)),P(`${r.b.ASSET}/${t.assetId}`))});return(0,n.jsx)(k.c,{disabled:S||v,onClick:Se,children:(0,n.jsxs)("div",{className:"flex justify-between space-x-2 items-center",children:[(0,n.jsx)("div",{className:S?"opacity-70":"opacity-100",children:(0,n.jsx)(ae.q,{src:t.iconUrl,name:t.name,network:t.address?N:void 0})}),(0,n.jsxs)("div",{className:`flex-grow ${S?"opacity-70":"opacity-100"}`,children:[(0,n.jsxs)("div",{className:"flex flex-row space-x-1 items-center ",children:[(0,n.jsx)("div",{children:(0,n.jsx)($.E,{testid:"asset-symbol",type:H.jK.SUBHEADER_16,children:t.symbol})}),(0,n.jsx)("div",{children:(0,n.jsx)(q.v,{theme:X.x.SECONDARY,size:X.V.SMALL,testid:"asset-type",children:(a=N.displayName)!=null?a:N.name})})]}),(0,n.jsx)("div",{className:"flex flex-row space-x-1",children:(0,n.jsx)($.E,{testid:"asset-blockchain",type:H.jK.BODY_14,children:t.name})})]}),(0,n.jsx)("div",{className:v?"opacity-50":"opacity-100",children:S?(0,n.jsx)(M.E,{text:m({id:te?"manage-assets.not-supported":"manage-assets.support-coming-soon",defaultMessage:te?"Not supported":"manage-assets.support-coming-soon"})}):(0,n.jsx)(oe.d,{testid:"toggle-asset-switch",label:t.name,checked:h,onChange:()=>{f({event:O.BQ.TOGGLE_HOMESCREEN_ASSET_VISIBILITY,props:{pageViewSource:O.Un.MANAGE_CRYPTO,assetName:t.name,assetId:t.assetId,enabled:!h}}),ie(t)}})})]})})},fe=({assets:t,loadMoreItems:s,hasNextPage:a,onAssetToggle:f})=>{const m=window.innerHeight-g.a4-g.Et-g.e4-g.N-32-34-16-16-36-16;return(0,n.jsx)(z.A,{dataLength:t.length,next:s,height:m,className:"tw-scrollbar",hasMore:!!a,loader:null,scrollThreshold:"5px",children:(0,n.jsx)("div",{className:"flex flex-col space-y-5",children:t.map(P=>(0,n.jsx)(Fe,{asset:P,onAssetToggle:f},P.assetId))})})};var me=e(44832),ge=e(3330),T=(t=>(t.ENABLED="enabled",t.DISABLED="disabled",t))(T||{}),He=e(29189),we=Object.defineProperty,Ue=Object.defineProperties,Ke=Object.getOwnPropertyDescriptors,re=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,ye=(t,s,a)=>s in t?we(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,le=(t,s)=>{for(var a in s||(s={}))Ve.call(s,a)&&ye(t,a,s[a]);if(re)for(var a of re(s))pe.call(s,a)&&ye(t,a,s[a]);return t},Ie=(t,s)=>Ue(t,Ke(s));const Ye=({search:t,assets:s})=>t?s.filter(({symbol:a,name:f,address:m})=>m?.toLowerCase().includes(t.toLowerCase())||a.toLowerCase().includes(t.toLowerCase())||f.toLowerCase().includes(t.toLowerCase())):s,Ge=()=>{(0,W.K)({event:O.Un.MANAGE_CRYPTO,props:null});const{formatMessage:t}=(0,L.A)(),s=(0,K.Zp)(),a=U(),f=(0,he.A)(),m=(0,me.g)(),P=(0,He.f)(),[h,J]=(0,o.useState)(P),[v,B]=(0,o.useState)({}),xe=(0,o.useMemo)(()=>{const d=m.find(ce=>ce.id===h);return d?[(0,ee.er)(d.coinId)]:null},[m,h]),[R,Pe]=(0,o.useState)(""),[ie,N]=(0,o.useState)(!1),{flattenData:S,isFetching:te,setQuery:Se,fetchNextPage:G,hasNextPage:ze}=(0,se.r)(xe,!0),ke=(0,ve.o)(),Ee=(0,o.useRef)(!1),Xe=(0,o.useMemo)(()=>Ye({search:R,assets:a}),[a,R]),qe=(0,o.useCallback)((0,I.debounce)(d=>{N(!0),Se(d)},200),[]),We=()=>{s(r.b.CUSTOM_ASSET_SELECT_NETWORK)},Ze=(0,o.useMemo)(()=>S.map(d=>d.assetId),[S]),Je=(0,o.useMemo)(()=>new Map(a.map(d=>[d.assetId,d.isShownInHomeScreen])),[a]),Qe=(0,o.useMemo)(()=>{const d=[...Xe.filter(i=>!Ze.includes(i.assetId)),...S.map(i=>Ie(le({},i),{isShownInHomeScreen:i.isShownInHomeScreen||Je.get(i.assetId)}))].filter(i=>{if(f.type===V.S.PRIVATE_KEY){const tt=i.isCustomAsset?60:(0,ee.X2)(i.assetId);return!!ke[tt]&&(!h||h===i.blockchainId)}return!h||h===i.blockchainId});return[...d.filter(i=>(i.isShownInHomeScreen||v[i.assetId]===T.ENABLED)&&v[i.assetId]!==T.DISABLED),...d.filter(i=>!i.isShownInHomeScreen&&v[i.assetId]!==T.ENABLED||v[i.assetId]===T.DISABLED)]},[Xe,v,Je,S,Ze,h]);(0,o.useEffect)(()=>{R&&(N(!0),Se(R))},[h]),(0,o.useEffect)(()=>{B({})},[R,h]);const _e=d=>B(ce=>{var i;return Ie(le({},ce),{[d.assetId]:(i=ce[d.assetId])!=null?i:d.isShownInHomeScreen?T.ENABLED:T.DISABLED})});(0,o.useEffect)(()=>{if(te&&!Ee.current){Ee.current=!0;return}!te&&Ee.current&&(N(!1),Ee.current=!1)},[te]);const et=(0,o.useMemo)(()=>ie?(0,n.jsx)(F.o,{children:(0,n.jsx)("div",{children:(0,n.jsx)(u.y,{size:j.Y.XLARGE})})}):Qe.length===0?(0,n.jsx)(A.B,{message:t({id:"token-asset-list.empty-search-caption"})}):(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)(fe,{assets:Qe,hasNextPage:ze,loadMoreItems:G,onAssetToggle:_e}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(l.$,{testid:"import-asset-btn",size:c.Vp.SMALL,shape:c.dB.DEFAULT,theme:c.ry.TRANSPARENT,onClick:We,children:(0,n.jsx)($.E,{theme:H.Il.BRAND,type:H.jK.SUBHEADER_14,children:t({id:"manage-crypto.import-asset"})})})})]}),[ie,Qe,ze,G,We,t]);return(0,n.jsxs)(g.LN,{children:[(0,n.jsx)(g.zY,{backAction:()=>s(r.b.DEFAULT),title:t({id:"manage-crypto.title"}),infoAction:(0,n.jsx)(Q,{testid:"import-asset-info-action",onClick:We})}),(0,n.jsxs)(g.Gv,{children:[(0,n.jsx)(D.D,{testid:"search-asset-input",value:R,onChange:d=>{N(!0),Pe(d.target.value),qe(d.target.value)},placeholder:t({id:"component.input-asset-search.placeholder"})}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(ge.u,{localFilteringBlockchainId:h,showText:!0,onFilterChange:J})}),et]})]})}}),33647:((y,E,e)=>{e.d(E,{d:()=>ue});var n=e(74848),A=e(66737),O=e(16638),r=e(96540),W=e(24867),l=e(95060),c=e(37786),C=e(96992),I=e(95015),o=e(69821),L=e(98975),b=e(65448),Q=e(82498),D=e(15953),F=e(9685),g=e(43660),j=e(66206),u=e(59124),$=e(44586),H=e(90540);let se=(0,r.createContext)(null);se.displayName="GroupContext";let Ae=r.Fragment;function Ce(p){var w;let[x,U]=(0,r.useState)(null),[K,z]=(0,H.b0)(),[ne,M]=(0,u.rU)(),k=(0,r.useMemo)(()=>({switch:x,setSwitch:U}),[x,U]),ae={},oe=p,q=(0,j.Ci)();return r.createElement(M,{name:"Switch.Description",value:ne},r.createElement(z,{name:"Switch.Label",value:K,props:{htmlFor:(w=k.switch)==null?void 0:w.id,onClick(X){x&&(X.currentTarget instanceof HTMLLabelElement&&X.preventDefault(),x.click(),x.focus({preventScroll:!0}))}}},r.createElement(se.Provider,{value:k},q({ourProps:ae,theirProps:oe,slot:{},defaultTag:Ae,name:"Switch.Group"}))))}let je="button";function Ne(p,w){var x;let U=(0,r.useId)(),K=(0,D.q)(),z=(0,b._)(),{id:ne=K||`headlessui-switch-${U}`,disabled:M=z||!1,checked:k,defaultChecked:ae,onChange:oe,name:q,value:X,form:Te,autoFocus:_=!1,...Be}=p,ee=(0,r.useContext)(se),[Re,he]=(0,r.useState)(null),ve=(0,r.useRef)(null),be=(0,L.P)(ve,w,ee===null?null:ee.setSwitch,he),V=(0,c.K)(ae),[Z,Y]=(0,l.P)(k,oe,V??!1),Fe=(0,C.L)(),[fe,me]=(0,r.useState)(!1),ge=(0,I._)(()=>{me(!0),Y?.(!Z),Fe.nextFrame(()=>{me(!1)})}),T=(0,I._)(s=>{if((0,F.l)(s.currentTarget))return s.preventDefault();s.preventDefault(),ge()}),He=(0,I._)(s=>{s.key===$.D.Space?(s.preventDefault(),ge()):s.key===$.D.Enter&&(0,g.q)(s.currentTarget)}),we=(0,I._)(s=>s.preventDefault()),Ue=(0,H.o2)(),Ke=(0,u.MM)(),{isFocusVisible:re,focusProps:Ve}=(0,A.o)({autoFocus:_}),{isHovered:pe,hoverProps:ye}=(0,O.M)({isDisabled:M}),{pressed:le,pressProps:Ie}=(0,W.Z)({disabled:M}),Ye=(0,r.useMemo)(()=>({checked:Z,disabled:M,hover:pe,focus:re,active:le,autofocus:_,changing:fe}),[Z,pe,re,le,M,fe,_]),$e=(0,j.v6)({id:ne,ref:be,role:"switch",type:(0,o.c)(p,Re),tabIndex:p.tabIndex===-1?0:(x=p.tabIndex)!=null?x:0,"aria-checked":Z,"aria-labelledby":Ue,"aria-describedby":Ke,disabled:M||void 0,autoFocus:_,onClick:T,onKeyUp:He,onKeyPress:we},Ve,ye,Ie),Ge=(0,r.useCallback)(()=>{if(V!==void 0)return Y?.(V)},[Y,V]),t=(0,j.Ci)();return r.createElement(r.Fragment,null,q!=null&&r.createElement(Q.CL,{disabled:M,data:{[q]:X||"on"},overrides:{type:"checkbox",checked:Z},form:Te,onReset:Ge}),t({ourProps:$e,theirProps:Be,slot:Ye,defaultTag:je,name:"Switch"}))}let De=(0,j.FX)(Ne),Me=Ce,de=H.JU,Oe=u.VY,Le=Object.assign(De,{Group:Me,Label:de,Description:Oe});const ue=({label:p,checked:w,testid:x,disabled:U,onChange:K})=>(0,n.jsxs)(Le,{"data-testid":x,checked:w,onChange:K,className:"switch",onClick:z=>z.stopPropagation(),disabled:U,children:[p&&(0,n.jsx)("span",{className:"sr-only",children:p}),(0,n.jsx)("span",{"aria-hidden":"true",className:"switch__toggle"})]})}),38795:((y,E,e)=>{e.d(E,{r:()=>W});var n=e(6475),A=e(96540),O=e(64145),r=e(89408);function W(l,c){const[C,I]=(0,A.useState)(void 0),{data:o,error:L,fetchNextPage:b,hasNextPage:Q,isFetching:D,isFetchingNextPage:F,status:g}=(0,n.q)({queryKey:["tokens",C,l?.join()],queryFn:({pageParam:u})=>O.YW.emit(r.A.SEARCH_ASSETS,{query:C,networks:l,page:u,includeNonCustomTokenNetworks:c}),enabled:C!==void 0,initialPageParam:0,refetchOnWindowFocus:!1,getNextPageParam:u=>u?.nextPage}),j=(0,A.useMemo)(()=>(o?.pages||[]).flatMap(u=>u?.data||[]),[o?.pages]);return{setQuery:I,data:o,error:L,fetchNextPage:b,hasNextPage:Q,isFetching:D,isFetchingNextPage:F,status:g,flattenData:j}}})}]);

//# sourceMappingURL=1627.js.map