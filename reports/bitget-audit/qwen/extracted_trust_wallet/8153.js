try{let T=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},u=new T.Error().stack;u&&(T._sentryDebugIds=T._sentryDebugIds||{},T._sentryDebugIds[u]="06556d98-3107-4e79-bde3-4400ce3c3f37",T._sentryDebugIdIdentifier="sentry-dbid-06556d98-3107-4e79-bde3-4400ce3c3f37")}catch{}{let T=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};T.SENTRY_RELEASE={id:"2.66.0"}}(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[8153],{2496:((T,u,e)=>{e.d(u,{D:()=>ae});var s=e(74848),i=e(9302),l=e(25708),d=e(52114),o=e(1279),n=e(66392),r=e(40053),t=e(6442);const c=({type:A,from:y,to:L,symbol:B})=>{const{formatMessage:R}=(0,t.A)(),w=(0,r.p)({value:y??"",maxCharsPerSide:7}),E=(0,r.p)({value:L??"",maxCharsPerSide:7});let S;switch(A){case n.w.Receive:case n.w.Claim:case n.w.ClaimRewards:case n.w.Undelegate:S=`${R({id:"generic.from"})}: ${w}`;break;case n.w.Send:case n.w.Delegate:case n.w.Redelegate:case n.w.Compound:case n.w.Approve:case n.w.Revoke:S=`${R({id:"generic.to"})}: ${E}`;break;case n.w.Swap:S=`${R({id:"generic.to"})}: ${B}`;break;default:return null}return(0,s.jsx)(d.E,{testid:"tx-item-subtitle",type:o.jK.BODY_14,theme:o.Il.UTILITY_1_OPACITY_1,children:S})};var f=e(26264),m=e(96540);const x=()=>(0,m.useMemo)(()=>["merlin","internet_computer","blast","scroll","bouncebit"],[]);var g=e(20413),a=e(94893),h=e(65504),p=e(68632),_=e(19376),P=e(73241),U=e(69254),K=e(21094),Q=e(57379),C=e(47767);const J=({transaction:A})=>{const{formatMessage:y}=(0,t.A)(),L=(0,C.Zp)(),B=x(),{id:R,status:w,type:E,from:S,to:M,symbol:Y,nft:D,amount:v,fee:W,isUnlimited:k}=(0,g.A)(A),N=E===n.w.Receive||E===n.w.ClaimRewards||E===n.w.Claim||E===n.w.Undelegate,Z=(0,Q.I)(E),z=Array.isArray(M)&&M.length>0&&M[0].id!==void 0?M[0].id:M,j=(0,m.useMemo)(()=>E===n.w.Revoke?"0":Z||N||E===n.w.Contract&&parseFloat(v)>0||E===n.w.Approve&&parseFloat(v)>0?v:W[0]||"0",[Z,W,v,E]),G=()=>j==="0"||E===n.w.Approve||E===n.w.Revoke?"":N?"+":"-",V=()=>j==="0"?o.Il.UTILITY_1_DEFAULT:N?o.Il.SUCCESS_1_DEFAULT:o.Il.UTILITY_1_DEFAULT,re=E===n.w.Approve&&k||E===n.w.Revoke;return(0,s.jsx)(a.c,{testid:"tx-item",onClick:()=>L(`${f.b.TRANSACTION}/${encodeURIComponent(R)}`),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex w-9 h-9 justify-center items-center",children:(0,s.jsx)(l.A,{status:w,type:E})}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(d.E,{testid:"tx-type",children:y({id:`component.transaction-item.type.${E}`})}),w!=="confirmed"&&(!B.includes(A.blockchain.id)||w==="pending")&&(0,s.jsx)(_.v,{testid:"tx-status",size:P.V.SMALL,theme:w==="pending"?P.x.WARNING:P.x.ERROR,children:y({id:`component.transaction-item.status.${w}`})})]}),(typeof z=="string"||typeof S=="string")&&(0,s.jsx)(c,{type:E,from:S,to:z,symbol:Y})]})]}),(0,s.jsx)("div",{children:D?(0,s.jsx)(h.q,{size:p.Y.LARGE,src:D.previewImage.url,name:D.name,network:D.blockchain}):(0,s.jsx)(U.h,{testid:"tx-amount",amountType:K.Cu.CRYPTO,value:j,currency:Y,theme:V(),prefix:G(),tinyThreshold:6,maxSignificantDecimals:6,shouldHideAmount:re})})]})})};var F=e(26858),O=e(36322);const b=A=>{if(!A)return!1;const y=(0,F.Mr)(A),L=(0,O.f)(A);return y?.isBuyCryptoEnabled&&!L};var X=e(65512),I=e(52619),$=e(8168),q=e(21612),te=e(29584),oe=e(11717),ee=e(38921);const ae=({transactions:A,children:y,loadMoreItems:L,hasNextPage:B,historyAvailable:R,fetchingStarted:w,fetchingTransactions:E,scrollableAreaHeight:S,asset:M})=>{var Y,D;const{formatMessage:v}=(0,t.A)(),W=(0,q.s)(),k=(0,C.Zp)(),N=b((Y=M?.assetId)!=null?Y:""),Z=(0,oe.w)((D=M?.assetId)!=null?D:""),z=(0,ee.G)(M),j=(0,m.useRef)(null),G=(0,m.useMemo)(()=>{var H,se;const ne=S<((se=(H=j.current)==null?void 0:H.offsetHeight)!=null?se:0);return R&&!ne&&B||w&&E},[R,Object.values(A).length,B]),V=Object.keys(A).length>0,re=()=>{var H;W(`${f.b.BUY}/${(H=M?.assetId)!=null?H:""}`)},le=()=>{k(z,{state:{pageViewSource:te.Un.ASSET}})};return(0,s.jsxs)("div",{className:"flex flex-col w-full space-y-4 mb-3 items-center",ref:j,children:[y,V&&(0,s.jsx)("div",{className:"flex flex-col w-full space-y-4",children:Object.entries(A).map(([H,se])=>(0,s.jsx)($.b,{title:H,children:se.map(ne=>(0,s.jsx)(J,{transaction:ne},ne.hash))},H))}),!V&&!E&&(0,s.jsxs)("div",{className:"flex flex-col space-y-4 items-center w-[310px]",children:[(0,s.jsx)(i.x,{}),(0,s.jsx)("div",{className:"text-center px-6",children:(0,s.jsx)(d.E,{type:o.jK.BODY_14,theme:o.Il.UTILITY_1_OPACITY_1,children:v({id:"history-list.no-transactions-found",defaultMessage:"Your crypto transactions will appear here once you start using wallet."})})}),N||Z&&(0,s.jsx)(X.$,{testid:"show-more-btn",onClick:N?re:le,shape:I.dB.DEFAULT,theme:I.ry.PRIMARY,children:v({id:`history-list.${N?"buy":"swap"}-crypto`,defaultMessage:N?"Buy Crypto":"Swap Crypto"})})]}),G&&(0,s.jsx)(X.$,{testid:"show-more-btn",onClick:L,shape:I.dB.DEFAULT,size:I.Vp.SMALL,theme:I.ry.SUBTLE,fullWidth:!1,loading:E,loadingData:v({id:"generic.loading",defaultMessage:"Loading"}),children:v({id:"history-list.load-more"})})]})}}),6475:((T,u,e)=>{e.d(u,{q:()=>o});var s=e(1651),i=e(58959),l=class extends s.${constructor(n,r){super(n,r)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(n,r){super.setOptions({...n,behavior:(0,i.PL)()},r)}getOptimisticResult(n){return n.behavior=(0,i.PL)(),super.getOptimisticResult(n)}fetchNextPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"backward"}}})}createResult(n,r){const{state:t}=n,c=super.createResult(n,r),{isFetching:f,isRefetching:m,isError:x,isRefetchError:g}=c,a=t.fetchMeta?.fetchMore?.direction,h=x&&a==="forward",p=f&&a==="forward",_=x&&a==="backward",P=f&&a==="backward";return{...c,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,i.rB)(r,t.data),hasPreviousPage:(0,i.RQ)(r,t.data),isFetchNextPageError:h,isFetchingNextPage:p,isFetchPreviousPageError:_,isFetchingPreviousPage:P,isRefetchError:g&&!h&&!_,isRefetching:m&&!p&&!P}}},d=e(44171);function o(n,r){return(0,d.t)(n,l,r)}}),8168:((T,u,e)=>{e.d(u,{b:()=>d});var s=e(74848),i=e(52114),l=e(1279);const d=({title:o,children:n,className:r=""})=>(0,s.jsxs)("div",{className:`my-2 flex flex-col space-y-4 pb-2 ${r}`,children:[o&&(0,s.jsx)(i.E,{theme:l.Il.THIRD,testid:"category-title",children:o}),n]})}),11717:((T,u,e)=>{e.d(u,{w:()=>d});var s=e(26858),i=e(33055),l=e(29251);function d(o){const n=(0,s.Mr)(o),r=(0,i.A)();return(n?.isSwapEnabled||n?.isSwapCrossChainEnabled)&&r?.type!==l.S.HARDWARE}}),20413:((T,u,e)=>{e.d(u,{A:()=>r});var s=e(26858),i=e(40790),l=e(96540),d=e(44657),o=e(79941),n=e(34476);const r=t=>{const c=(0,n.m)(t.blockchain.id),f=(0,i.F7)(c.coinId),m=c.isCustom?(0,s.dJ)(c,t.assetId):(0,s.Mr)(t.assetId);return(0,l.useMemo)(()=>{var x,g;const a={id:t.hash,from:t.events[0].metadata.from,to:t.events[0].metadata.to,type:t.events[0].type,status:t.status,symbol:(x=m?.symbol)!=null?x:c.symbol,fee:t.fee,date:t.createdAt,amount:(0,o.ct)(t,m)};if((0,o.fO)(t.events)){if(!f)return a.type=d.wL.Send,a.amount=Math.abs(Number(a.amount)).toString(),a;const h=f.address,{from:p,to:_}=t.events[0].metadata,P=p===h?_:p;parseFloat(a.amount)>0?(a.type=d.wL.Receive,a.from=P,a.to=h):(a.type=d.wL.Send,a.from=h,a.to=P,a.amount=Math.abs(Number(a.amount)).toString())}return(0,o.x0)(t.events)&&(a.input=t.events[0].metadata.input),(0,o.m5)(t.events)&&(a.isUnlimited=t.events[0].metadata.isUnlimited),t.nft&&(a.nft={onChainId:t.nft.onChainId,previewImage:t.nft.previewImageURL,originalImage:t.nft.originalMediaURL,name:t.nft.name,collectionName:t.nft.collectionName,collectionId:t.nft.collectionId,blockchain:{iconUrl:c.iconUrl,name:(g=c.displayName)!=null?g:c.name}}),a},[JSON.stringify(t)])}}),25708:((T,u,e)=>{e.d(u,{A:()=>m});var s=e(74848),i=e(64720),l=e(93077),d=e(88774),o=e(30081),n=e(68632),r=e(79830),t=e(66392),c=e(96159),f=e(54290);const m=({status:x,type:g})=>{if(x==="pending")return(0,s.jsx)(r.y,{size:n.Y.SMALL});let a;switch(g){case t.w.Contract:case t.w.RegisterToken:case t.w.TrustLine:case t.w.Approve:case t.w.Revoke:a=(0,s.jsx)(o.p,{width:24,height:24,colorClass:"text-iconNormal"});break;case t.w.Receive:a=(0,s.jsx)(l.Z,{width:20,height:20,colorClass:"text-iconNormal"});break;case t.w.Send:a=(0,s.jsx)(f.s,{width:20,height:20,colorClass:"text-iconNormal"});break;case t.w.Swap:case t.w.Trade:a=(0,s.jsx)(c.f,{width:20,height:20,colorClass:"text-iconNormal"});break;case t.w.Delegate:case t.w.Undelegate:case t.w.Redelegate:case t.w.Claim:case t.w.ClaimRewards:a=(0,s.jsx)(i.S,{width:20,height:20,colorClass:"text-iconNormal"});break;default:a=(0,s.jsx)(d.S,{width:20,height:20,colorClass:"text-iconNormal"})}return(0,s.jsx)("div",{className:"flex w-full justify-center items-center h-full bg-bg3 rounded-full",children:a})}}),30081:((T,u,e)=>{e.d(u,{p:()=>d});var s=e(74848);const i=24,l=24,d=({width:o,height:n,colorClass:r})=>(0,s.jsx)("svg",{className:r,fill:"none",width:o??i,height:n??l,viewBox:`0 0 ${i} ${l}`,xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.0561 2.62763C4.45795 2.22576 5.00301 2 5.57132 2H14.857C15.0465 2 15.2282 2.07525 15.3621 2.20921L20.3622 7.20921C20.496 7.34316 20.5713 7.52484 20.5713 7.71429V19.8571C20.5713 20.4254 20.3456 20.9706 19.9438 21.3724C19.5419 21.7743 18.9968 22 18.4285 22H5.57132C5.003 22 4.45795 21.7743 4.0561 21.3724C3.65424 20.9706 3.42847 20.4254 3.42847 19.8571V4.14286C3.42847 3.57454 3.65424 3.02949 4.0561 2.62763ZM8.42847 7.53571C7.93535 7.53571 7.53561 7.93546 7.53561 8.42857C7.53561 8.92169 7.93535 9.32143 8.42847 9.32143H11.2856C11.7787 9.32143 12.1785 8.92169 12.1785 8.42857C12.1785 7.93546 11.7787 7.53571 11.2856 7.53571H8.42847ZM8.42847 11.8214C7.93535 11.8214 7.53561 12.2212 7.53561 12.7143C7.53561 13.2074 7.93535 13.6071 8.42847 13.6071H15.5713C16.0644 13.6071 16.4642 13.2074 16.4642 12.7143C16.4642 12.2212 16.0644 11.8214 15.5713 11.8214H8.42847ZM7.53561 17C7.53561 16.5069 7.93535 16.1071 8.42847 16.1071H15.5713C16.0644 16.1071 16.4642 16.5069 16.4642 17C16.4642 17.4931 16.0644 17.8929 15.5713 17.8929H8.42847C7.93535 17.8929 7.53561 17.4931 7.53561 17Z",fill:"currentColor"})})}),34476:((T,u,e)=>{e.d(u,{m:()=>d});var s=e(96540),i=e(10537),l=e(15078);function d(o){const n=(0,i.n)(),r=(0,l.I)();return(0,s.useMemo)(()=>{var t;return(t=n[o])!=null?t:r[o]},[o,n,r])}}),36322:((T,u,e)=>{e.d(u,{f:()=>l});var s=e(92257),i=e(79372);function l(d){return(0,s.F)()==="GB"&&!i.uV.includes(d)}}),38921:((T,u,e)=>{e.d(u,{G:()=>i});var s=e(26264);function i(l){return l?l.defaultSwapPair?`${s.b.SWAP}?from=${l.defaultSwapPair.fromAsset}&to=${l.defaultSwapPair.toAsset}`:l.defaultSwapCrossChainPair?`${s.b.SWAP}?from=${l.defaultSwapCrossChainPair.fromAsset}&to=${l.defaultSwapCrossChainPair.toAsset}`:`${s.b.SWAP}?from=${l.assetId}`:s.b.SWAP}}),45871:((T,u,e)=>{e.d(u,{x:()=>l});var s=e(68157),i=e(96540);const l=()=>{var d;const o=(d=(0,s.GV)(n=>{var r;return(r=n.tx.itemsPerWalletAccount[n.wallet.walletId])==null?void 0:r[n.wallet.selectedAccountId]}))!=null?d:[];return(0,i.useMemo)(()=>(o.sort((n,r)=>r.createdAt-n.createdAt),o),[o])}}),54894:((T,u,e)=>{e.d(u,{d:()=>l});var s=e(68157),i=e(96540);const l=d=>{const{tx:o,wallet:n}=s.M_.getState();return(0,i.useMemo)(()=>{var r,t,c,f;return(f=(c=(t=(r=o.fetchedTransactionPeriodsByAccount)==null?void 0:r[n.walletId])==null?void 0:t[n.selectedAccountId])==null?void 0:c[d])!=null?f:{}},[o.fetchedTransactionPeriodsByAccount,n.walletId,n.selectedAccountId,d])}}),62266:((T,u,e)=>{e.d(u,{Qp:()=>h,Tl:()=>p});var s=e(54894),i=e(64145),l=e(22670),d=e(68157),o=e(52856),n=e(9389),r=e(33055),t=e(85005),c=e(97665),f=e(6475),m=e(96540),x=(_,P,U)=>new Promise((K,Q)=>{var C=O=>{try{F(U.next(O))}catch(b){Q(b)}},J=O=>{try{F(U.throw(O))}catch(b){Q(b)}},F=O=>O.done?K(O.value):Promise.resolve(O.value).then(C,J);F((U=U.apply(_,P)).next())});const g=1,a=6,h=new Date("01/03/2009");function p(_,P,U){const[K,Q]=(0,m.useState)(new Date),[C,J]=(0,m.useState)((0,t.NW)(new Date,g)),[F,O]=(0,m.useState)(!1),b=(0,r.v)(),X=(0,n.Cb)(),{from:I,to:$,nextToken:q}=(0,s.d)(_.assetId),te=(0,m.useRef)(void 0),[oe,ee]=(0,m.useState)(!1),[ae,A]=(0,m.useState)(!1),y=(0,c.jE)();(0,m.useEffect)(()=>{C<=h&&ee(!1)},[C]);const L=(0,m.useCallback)(()=>{!I||!$||new Date(I).getTime()<C.getTime()&&x(null,null,function*(){yield i.YW.emit(l.A.FETCH_MISSING_TRANSACTIONS,{from:K,to:I,asset:_,blockchain:P,accountAddress:U,limit:50})})},[I,$,K,C]),B=(D,v,W)=>{d.M_.dispatch(o.B.actions.updateCachedTransactionsPeriod({selectedWalletId:b,accountId:X,assetId:_.assetId,from:D,to:v,nextToken:W}))},{data:R,hasNextPage:w,isFetching:E,status:S,fetchNextPage:M}=(0,f.q)({queryKey:["transactions",_.assetId],queryFn:D=>x(null,[D],function*({pageParam:v}){if(te.current||v.from<h)return ee(!1),null;const W={asset:_,blockchain:P,accountAddress:U,from:v.from.toISOString(),to:v.to.toISOString(),limit:50,nextToken:v.nextToken},{transactions:k,chainUnsupported:N,emptyPeriodFetched:Z,nextToken:z}=yield i.YW.emit(l.A.FETCH_ASSET_TRANSACTION_HISTORY,W);let j=v.from,G=v.to,V=z;return N?(te.current=!0,ee(!1),{}):(k?.length&&d.M_.dispatch(o.B.actions.updateTxs({items:k,walletId:b,accountId:X})),I||B(K.toUTCString(),C.toUTCString()),v.from>new Date(I)&&C<new Date(I)&&(B(W.from,$,q),j=(0,t.NW)(new Date($),-a),G=new Date($),V=void 0),v.to<new Date($)&&B(I,W.to,v.nextToken),Q(j),J(G),O(!!Z),ae||L(),{from:j,to:G,nextToken:V})}),refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:1e3*60*5,gcTime:1e3*60*60*24,initialPageParam:{to:C,from:K,nextToken:void 0},getNextPageParam:D=>{var v;if(!(C<=h||D===null))return D.nextToken||q||!D.from?{nextToken:(v=D.nextToken)!=null?v:q,from:K,to:C}:{from:new Date(D.to.getTime()),to:(0,t.NW)(D.to,a)}}}),Y=(0,m.useMemo)(()=>{var D;if(!!((D=R?.pages[0])!=null&&D.from))return C.getTime()},[S,C,R]);return(0,m.useEffect)(()=>{F&&C>h&&(M(),O(!1))},[F]),(0,m.useEffect)(()=>()=>{y.removeQueries(),A(!0)},[]),{isFetching:E,transactionsFetched:oe,hasNextPage:w,lastFetchedTransactionTime:Y,emptyPeriodFetched:F,fetchNextPage:M}}}),69325:((T,u,e)=>{e.d(u,{q:()=>r});var s=e(66392);function i(t){return t===s.w.Trade||t===s.w.Inscribe||t===s.w.Send||t===s.w.Delegate||t===s.w.Undelegate||t===s.w.ClaimRewards||t===s.w.Claim||t===s.w.Compound||t===s.w.Redelegate||t===s.w.Utxo||t===s.w.Contract||t===s.w.Receive||t===s.w.Revoke||t===s.w.Approve}function l(t){return i(t.metadata.internal.type)?t.metadata.internal.asset:void 0}var d=e(45871),o=e(96540),n=e(6442);const r=(t,c)=>{const{locale:f}=(0,n.A)(),m=(0,d.x)();return(0,o.useMemo)(()=>{const g=(t&&c?m.filter(h=>{const p=h.events.some(_=>i(_.type)||_.type==="swap")&&h.blockchain.id===t.id&&h.assetId===c.assetId;return h.events.some(_=>_.type==="contract")?p:p&&!h.events.some(_=>!_.metadata.to)}):m).filter(h=>h.events.some(p=>p.type!==void 0)),a={};for(const h of g){const p=new Date(h.createdAt),_=`${p.toLocaleDateString(f,{month:"short"})} ${p.getDate()}, ${p.getFullYear()}`;a[_]||(a[_]=[]),a[_].push(h)}return a},[c?.address,t?.chainId,t?.id,m])}}),85005:((T,u,e)=>{e.d(u,{NW:()=>d,t6:()=>n});var s=e(15192);function i(t){return t.div(864e5)}function l(t){const c=Math.floor(t/864e5),f=Math.floor(t%(1440*60*1e3)/(3600*1e3)),m=Math.floor(t%(3600*1e3)/(60*1e3));return{days:c,hours:f,minutes:m}}function d(t,c){const f=new Date(t.getTime());return f.setMonth(f.getMonth()-c),f}function o(t,c){return c.getMonth()-t.getMonth()+12*(c.getFullYear()-t.getFullYear())}function n(t,c){const f=new Date(t.getTime());return f.setDate(f.getDate()-c),f}function r(t,c){return i(new Big(c.getTime()-t.getTime())).toNumber()}})}]);

//# sourceMappingURL=8153.js.map