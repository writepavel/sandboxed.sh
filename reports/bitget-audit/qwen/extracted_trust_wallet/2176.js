try{let A=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},h=new A.Error().stack;h&&(A._sentryDebugIds=A._sentryDebugIds||{},A._sentryDebugIds[h]="e0c65190-91fa-4291-b46b-4bd71ed680d0",A._sentryDebugIdIdentifier="sentry-dbid-e0c65190-91fa-4291-b46b-4bd71ed680d0")}catch{}{let A=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};A.SENTRY_RELEASE={id:"2.66.0"}}(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[2176],{20002:((A,h,t)=>{t.d(h,{g:()=>f});var f=(r=>(r.MOBILE_PAY="MOBILE_PAY",r.BANK_TRANSFER="BANK_TRANSFER",r.CREDIT_CARD="CREDIT_CARD",r.DIGITAL_WALLET="DIGITAL_WALLET",r.P2P="P2P",r.OTHER="OTHER",r))(f||{})}),37464:((A,h,t)=>{t.d(h,{m:()=>E});var f=t(84568),r=t(68157),T=t(84773),D=t(91565);function E(a){var v,_,i;const{deviceId:s,hashKey:p}=r.M_.getState().app;if(!s||!p||!((v=a.url)!=null&&v.startsWith(f.W2)))return a;const m=(_=a.method)==null?void 0:_.toUpperCase(),[y,O]=a.url.slice(f.W2.length).split("?"),R=Object.entries((i=a.params)!=null?i:{}).filter(([,H])=>H!==void 0).flatMap(([H,j])=>`${H}=${j}`).join("&"),C=(0,T.p)(O??R),B=new Date().toUTCString(),K=crypto.randomUUID(),U=[m,y,C,s,K,B].join(";"),S=D.createHmac("sha256",p).update(U).digest("base64");return a.headers["X-TW-DATE"]=B,a.headers["X-TW-NONCE"]=K,a.headers["X-TW-CREDENTIAL"]=s,a.headers.Authorization=`HMAC-SHA256 Signature=${S}`,a}}),42148:((A,h,t)=>{t.d(h,{HK:()=>S,HV:()=>V,MK:()=>J,RT:()=>H,Rl:()=>$,WD:()=>j,gk:()=>z,vQ:()=>L});var f=t(79372),r=t(20002),T=t(29251),D=t(49971),E=t(62643),a=t(48287).Buffer,v=Object.defineProperty,_=Object.defineProperties,i=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,y=(n,d,l)=>d in n?v(n,d,{enumerable:!0,configurable:!0,writable:!0,value:l}):n[d]=l,O=(n,d)=>{for(var l in d||(d={}))p.call(d,l)&&y(n,l,d[l]);if(s)for(var l of s(d))m.call(d,l)&&y(n,l,d[l]);return n},R=(n,d)=>_(n,i(d)),C=(n,d,l)=>new Promise((I,M)=>{var g=e=>{try{c(l.next(e))}catch(u){M(u)}},x=e=>{try{c(l.throw(e))}catch(u){M(u)}},c=e=>e.done?I(e.value):Promise.resolve(e.value).then(g,x);c((l=l.apply(n,d)).next())});function B(n){return objectArrayKeysToCamelCase(n).sort((I,M)=>M.fiatMoney.amount-I.fiatMoney.amount)}function K(n){const d=objectArrayKeysToCamelCase(n),l=d.filter(e=>!e.isRecommended),I=d.filter(e=>e.isRecommended).sort((e,u)=>u.digitalMoney.amount-e.digitalMoney.amount),M=I?.[0],g=[...I.slice(1),...l].sort((e,u)=>u.digitalMoney.amount-e.digitalMoney.amount),x=[M,...g].filter(Boolean),c={CREDIT_CARD:[],P2P:[],OTHER:[]};return x.forEach(e=>{var u;e.paymentMethod.paymentMethod===PaymentMethod.CREDIT_CARD?c[PaymentMethod.CREDIT_CARD].push(e):e.paymentMethod.paymentMethod===PaymentMethod.P2P?c[PaymentMethod.P2P].push(e):(u=e.paymentMethod.providerName)!=null&&u.includes("Apple Pay")?e.paymentMethod.providerName==="Apple Pay/Google Pay"&&c.OTHER.push(R(O({},e),{paymentMethod:R(O({},e.paymentMethod),{providerName:"Google Pay"})})):c.OTHER.push(e)}),c}function L(n,d){f.hB.forEach(l=>{const I=n.findIndex(M=>M.symbol===l&&!M.address);if(I>=0&&(n[I]=R(O({},n[I]),{hardwareSupportComingSoon:!0})),I===-1){const M=d.find(g=>g.symbol===l&&!g.address);M&&n.push(R(O({},M),{hardwareSupportComingSoon:!0}))}})}function U(n,d,l,I){d.forEach(M=>{M.isBuyCryptoEnabled&&(l.type!==WalletType.HARDWARE||I.get(M.assetId))&&!n.some(g=>g.assetId===M.assetId)&&n.push(M)})}function S(n){return n.origin.includes("ramp")}function H(n){return n.origin.includes("mercuryo")}function j(n){return n.origin.includes("moonpay")}function z(n){return!n.origin.includes("ramp")&&!n.origin.includes("moonpay")}function J(n,d,l,I){return C(this,null,function*(){const M=[E.yq.transfer({fromPubkey:n,toPubkey:d,lamports:l})],g=new E.wu({payerKey:n,recentBlockhash:(yield I.getLatestBlockhash()).blockhash,instructions:M}).compileToV0Message();return new E.Kt(g)})}function V(n){const d=JSON.stringify(n),l=typeof n.version!="number"?"legacy":n.version,I=a.from(n.serialize()).toString("base64");return{data:d,raw:I,version:l}}function $(n){return!!n?.OTHER}}),67168:((A,h,t)=>{t.d(h,{U:()=>a});var f=t(8935),r=t(68157),T=t(61855),D=t(91565),E=(_,i,s)=>new Promise((p,m)=>{var y=C=>{try{R(s.next(C))}catch(B){m(B)}},O=C=>{try{R(s.throw(C))}catch(B){m(B)}},R=C=>C.done?p(C.value):Promise.resolve(C.value).then(y,O);R((s=s.apply(_,i)).next())});function a(){return E(this,null,function*(){let _=(0,f.KF)();return _||(_=yield v(),r.M_.dispatch(T.A.actions.setAuthIdentifier(_))),_})}function v(){return E(this,null,function*(){let _=crypto.randomUUID();const i=(0,D.createHash)("sha256").update(_).digest("hex").substring(0,4);return _+=`-${i}`,_})}}),72396:((A,h,t)=>{t.d(h,{f:()=>x});var f=t(74848),r=t(11377),T=t(79372),D=t(42148),E=t(68632),a=t(22146),v=t(64145),_=t(99360),i=t(68157),s=t(75485),p=t(28398),m=t(47996),y=t(10537),O=t(81282),R=t(66392),C=t(40790),B=t(71287),K=t(62643),L=t(96540),U=t(6442),S=t(16763),H=t.n(S),j=t(84525),z=Object.defineProperty,J=Object.defineProperties,V=Object.getOwnPropertyDescriptors,$=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,d=Object.prototype.propertyIsEnumerable,l=(c,e,u)=>e in c?z(c,e,{enumerable:!0,configurable:!0,writable:!0,value:u}):c[e]=u,I=(c,e)=>{for(var u in e||(e={}))n.call(e,u)&&l(c,u,e[u]);if($)for(var u of $(e))d.call(e,u)&&l(c,u,e[u]);return c},M=(c,e)=>J(c,V(e)),g=(c,e,u)=>new Promise((X,F)=>{var Q=W=>{try{Y(u.next(W))}catch(G){F(G)}},b=W=>{try{Y(u.throw(W))}catch(G){F(G)}},Y=W=>W.done?X(W.value):Promise.resolve(W.value).then(Q,b);Y((u=u.apply(c,e)).next())});const x=({url:c,selectedCrypto:e,opened:u,onClose:X})=>{const{formatMessage:F}=(0,U.A)(),Q=(0,y.n)(!0),b=(0,m.o)(e.blockchainId),Y=(0,O.o)(b.id),W=(0,C.F7)((0,s.X2)(e.assetId,!0)),G=c.includes("ramp"),q=(0,L.useMemo)(()=>G?c.replace("webview-mobile","webview-desktop"):c,[c]),et=(o,P,w)=>g(null,null,function*(){o.addSignature(new K.J3(W?.address),S.decode(P)),yield w.sendRawTransaction(o.serialize())}),nt=o=>g(null,null,function*(){const P=(0,B.y7)(Y.url),w=yield(0,D.MK)(new K.J3(W?.address),new K.J3(o.to),Number(o.value),P),N=(0,D.HV)(w),Z=yield v.YW.emit(_.A.SOL_SIGN_RAW_TRANSACTION,M(I({},N),{isInternal:!0}));yield et(w,Z,P)}),st=o=>!new URL(q).toString().startsWith(new URL(o.origin).toString())&&o.origin!==T._B,k=(0,L.useCallback)(o=>{var P;const{data:{payload:w}}=o;if(o.data.type==="SEND_CRYPTO"){if(e.assetId.toLowerCase()!==((P=w.assetInfo.assetId)==null?void 0:P.toLowerCase()))throw Error("Asset ID mismatch");return{value:w.amount,to:w.address,network:b,asset:e,isInternal:!0,type:R.w.Send}}},[e,Q]),dt=(0,L.useCallback)(o=>{const{data:{payload:P}}=o;if(o.data.type==="SEND_CRYPTO"){if(e.assetId.toLowerCase()!==P.assetInfo.uai.toLowerCase())throw Error("Asset ID mismatch");return{value:(0,j.nj)(P.amount),to:P.address,network:b,asset:e,isInternal:!0,type:R.w.Send}}},[e,Q]),at=(0,L.useCallback)(o=>{var P,w;const{payload:N,type:Z}=JSON.parse(o.data);if(Z!=="SEND_CRYPTO")return;const rt=!!parseInt(N.currency.metadata.chainId),ot=b.chainId===N.currency.metadata.chainId;if(rt&&!ot)throw Error("Blockchain not found when forming a transaction");const _t=parseInt(N?.currency.metadata.contractAddress)===0,it=!!e.address,lt=((P=e.address)==null?void 0:P.toLowerCase())!==((w=N?.currency.metadata.contractAddress)==null?void 0:w.toLowerCase());if(_t&&!b||it&&lt)throw Error("Asset ID mismatch");return{value:(0,j.nj)(N.amount),to:N.address,network:b,asset:e,isInternal:!0,type:R.w.Send}},[e,Q]),tt=o=>g(null,null,function*(){if(st(o))throw Error("Event origin different");let P;(0,D.HK)(o)?(o.data.payload.amount=(0,j.nj)(o.data.payload.amount),o.data.payload.assetInfo.assetId=o.data.payload.assetInfo.uai,P=k(o)):(0,D.RT)(o)?(o.data.payload.amount=(0,j.nj)(o.data.payload.amount),P=k(o)):(0,D.WD)(o)?P=at(o):(0,D.gk)(o)&&(P=k(o)),P?.asset&&(P.network.blockchain.toLowerCase()===r.J.solana?yield nt(P):(yield i.M_.dispatch(p.A.actions.setSelectedBlockchain({id:b.id,selectedBlockchainType:b.isCustom?p.l.CUSTOM:p.l.MAIN})),yield v.YW.emit(_.A.ETH_SEND_TRANSACTION,P)))});return(0,L.useEffect)(()=>(window.addEventListener("message",tt),()=>window.removeEventListener("message",tt)),[c]),(0,f.jsx)(a.a,{title:F({id:"generic.sell-crypto"}),opened:u,size:c.includes("ramp")?E.Y.LARGE:E.Y.MEDIUM,onClose:X,children:(0,f.jsx)("iframe",{src:q,height:"610px",width:"100%"})})}}),75478:((A,h,t)=>{t.d(h,{e:()=>p});var f=t(39255),r=t(98939),T=t(84568),D=t(68157),E=t(61855),a=t(67168),v=t(99603),_=t(93155),i=(m,y,O)=>new Promise((R,C)=>{var B=U=>{try{L(O.next(U))}catch(S){C(S)}},K=U=>{try{L(O.throw(U))}catch(S){C(S)}},L=U=>U.done?R(U.value):Promise.resolve(U.value).then(B,K);L((O=O.apply(m,y)).next())});let s=!1;function p(m){return i(this,null,function*(){var y,O,R;const C=((y=m.response)==null?void 0:y.status)===403,B=(R=(O=m.response)==null?void 0:O.config.url)==null?void 0:R.startsWith(T.W2);if(C&&B&&!s){s=!0;const K=yield(0,a.U)();yield v.A.post(`${T.W2}/v2/devices/fingerprint`,{identifier:K,bundle:f.RL,sr:r.O0}).then(({data:L})=>D.M_.dispatch(E.A.actions.setHashKey(L.hash_key))).catch(L=>{_.A.warn("Error while fetching hash key",L)}).finally(()=>{s=!1})}return Promise.reject(m)})}}),77333:((A,h,t)=>{t.d(h,{B:()=>r});var f=t(86852);const r=T=>(T.headers.traceparent=(0,f.J3)(),T)}),84773:((A,h,t)=>{t.d(h,{p:()=>D});var f=t(90658),r=(E,a,v)=>new Promise((_,i)=>{var s=y=>{try{m(v.next(y))}catch(O){i(O)}},p=y=>{try{m(v.throw(y))}catch(O){i(O)}},m=y=>y.done?_(y.value):Promise.resolve(y.value).then(s,p);m((v=v.apply(E,a)).next())});function T(){return r(this,null,function*(){var E;const a=yield browser.tabs.query({active:!0,currentWindow:!0});return(E=a[0])!=null&&E.url?new URL(a[0].url).origin:null})}function D(E){if(!E)return E;const a=new URLSearchParams(E),v=Array.from(a.keys());v.sort((s,p)=>s.localeCompare(p));const _=new Set(v),i=[];for(const s of _){const p=a.getAll(s);for(const m of p)i.push(`${encodeURIComponent(s)}=${encodeURIComponent(m)}`)}return i.join("&")}}),86852:((A,h,t)=>{t.d(h,{J3:()=>a});var f=(i=>(i.VERSION="00",i.SAMPLED_FLAG="01",i.UNSAMPLED_FLAG="00",i))(f||{});const r=4,T=i=>{let s;do{const p=new Uint8Array(i/2);crypto.getRandomValues(p),s=Array.from(p).map(m=>m.toString(16).padStart(2,"0")).join("")}while(s.split("").every(p=>p==="0"));return s},D=()=>T(32),E=()=>T(16),a=(i=!0)=>{const s=D(),p=E();return`00-${s}-${p}-${i?"01":"00"}`},v=i=>{const s=i.split("-");return s.length!==r?null:s[r-3]},_=i=>{const s=i.split("-");return s.length!==r?null:s[r-2]}}),96324:((A,h,t)=>{t.d(h,{l:()=>f});var f=(r=>(r.ALL="all",r.BUY_CRYPTO="buycrypto",r.SELL_CRYPTO="sellcrypto",r))(f||{})}),99603:((A,h,t)=>{t.d(h,{A:()=>v,h:()=>a});var f=t(37464),r=t(77333),T=t(75478),D=t(71287),E=t(57536);const a=E.A.create({timeout:5e3,adapter:"fetch",headers:{[D.k0.name]:D.k0.value}});a.interceptors.request.use(r.B,_=>_),a.interceptors.request.use(f.m,_=>_),a.interceptors.response.use(_=>_,T.e);const v=a})}]);

//# sourceMappingURL=2176.js.map